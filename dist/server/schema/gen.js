"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.leadingSpacesCount = leadingSpacesCount;
exports.multiline = multiline;
exports.makeFieldTypeName = makeFieldTypeName;
exports.Writer = void 0;

function leadingSpacesCount(s) {
  let count = 0;

  while (count < s.length && (s[count] === ' ' || s[count] === '\t')) {
    count += 1;
  }

  return count;
}

function multiline(s) {
  s = s.replace("\r\n", "\n").replace("\n\r", "\n").replace("\r", "\n");

  if (!s.startsWith("\n")) {
    return s;
  }

  const lines = s.split("\n");

  if (lines.length < 2) {
    return s;
  }

  let leadingSpacesToRemove = Math.min(...lines.filter(l => l.trim() !== '').map(leadingSpacesCount));

  for (let i = 1; i < lines.length; i += 1) {
    const leadingSpaces = leadingSpacesCount(lines[i]);

    if (leadingSpaces === lines[i].length) {
      lines[i] = '';
    } else if (leadingSpaces >= leadingSpacesToRemove) {
      lines[i] = lines[i].substr(leadingSpacesToRemove);
    }
  }

  if (lines[lines.length - 1] === '') {
    lines.splice(lines.length - 1, 1);
  }

  lines.splice(0, 1);
  return lines.join('\n');
}

class Writer {
  constructor() {
    this.parts = [];
  }

  clear() {
    this.parts = [];
  }

  generated() {
    return this.parts.join('');
  }

  write(...strings) {
    this.parts.push(...strings);
  }

  writeLn(...strings) {
    this.write(...strings, '\n');
  }

  writeBlock(text) {
    this.write(multiline(text));
  }

  writeBlockLn(text) {
    this.writeLn(multiline(text));
  }

}

exports.Writer = Writer;

function convertFirstLetterToUpperCase(s) {
  return s !== '' ? `${s.substr(0, 1).toUpperCase()}${s.substr(1)}` : s;
}

function convertFirstLetterToLowerCase(s) {
  return s !== '' ? `${s.substr(0, 1).toLowerCase()}${s.substr(1)}` : s;
}

function toPascalStyle(s) {
  return s.split('_').map(convertFirstLetterToUpperCase).join('');
}

function toCamelStyle(s) {
  return convertFirstLetterToLowerCase(toPascalStyle(s));
}

function makeFieldTypeName(typeName, fieldName) {
  return `${typeName}${toPascalStyle(fieldName)}`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NlcnZlci9zY2hlbWEvZ2VuLmpzIl0sIm5hbWVzIjpbImxlYWRpbmdTcGFjZXNDb3VudCIsInMiLCJjb3VudCIsImxlbmd0aCIsIm11bHRpbGluZSIsInJlcGxhY2UiLCJzdGFydHNXaXRoIiwibGluZXMiLCJzcGxpdCIsImxlYWRpbmdTcGFjZXNUb1JlbW92ZSIsIk1hdGgiLCJtaW4iLCJmaWx0ZXIiLCJsIiwidHJpbSIsIm1hcCIsImkiLCJsZWFkaW5nU3BhY2VzIiwic3Vic3RyIiwic3BsaWNlIiwiam9pbiIsIldyaXRlciIsImNvbnN0cnVjdG9yIiwicGFydHMiLCJjbGVhciIsImdlbmVyYXRlZCIsIndyaXRlIiwic3RyaW5ncyIsInB1c2giLCJ3cml0ZUxuIiwid3JpdGVCbG9jayIsInRleHQiLCJ3cml0ZUJsb2NrTG4iLCJjb252ZXJ0Rmlyc3RMZXR0ZXJUb1VwcGVyQ2FzZSIsInRvVXBwZXJDYXNlIiwiY29udmVydEZpcnN0TGV0dGVyVG9Mb3dlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsInRvUGFzY2FsU3R5bGUiLCJ0b0NhbWVsU3R5bGUiLCJtYWtlRmllbGRUeXBlTmFtZSIsInR5cGVOYW1lIiwiZmllbGROYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sU0FBU0Esa0JBQVQsQ0FBNEJDLENBQTVCLEVBQStDO0FBQ2xELE1BQUlDLEtBQUssR0FBRyxDQUFaOztBQUNBLFNBQU9BLEtBQUssR0FBR0QsQ0FBQyxDQUFDRSxNQUFWLEtBQXFCRixDQUFDLENBQUNDLEtBQUQsQ0FBRCxLQUFhLEdBQWIsSUFBb0JELENBQUMsQ0FBQ0MsS0FBRCxDQUFELEtBQWEsSUFBdEQsQ0FBUCxFQUFvRTtBQUNoRUEsSUFBQUEsS0FBSyxJQUFJLENBQVQ7QUFDSDs7QUFDRCxTQUFPQSxLQUFQO0FBQ0g7O0FBRU0sU0FBU0UsU0FBVCxDQUFtQkgsQ0FBbkIsRUFBc0M7QUFDekNBLEVBQUFBLENBQUMsR0FBR0EsQ0FBQyxDQUFDSSxPQUFGLENB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QixXQUFmLEVBQTZCLEdBQUVqQyxDQUFDLENBQUNpQixNQUFGLENBQVMsQ0FBVCxDQUFZLEVBRDdDLEdBRURqQixDQUZOO0FBR0g7O0FBRUQsU0FBU2tDLDZCQUFULENBQXVDbEMsQ0FBdkMsRUFBMEQ7QUFDdEQsU0FBT0EsQ0FBQyxLQUFLLEVBQU4sR0FDQSxHQUFFQSxDQUFDLENBQUNpQixNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosRUFBZWtCLFdBQWYsRUFBNkIsR0FBRW5DLENBQUMsQ0FBQ2lCLE1BQUYsQ0FBUyxDQUFULENBQVksRUFEN0MsR0FFRGpCLENBRk47QUFHSDs7QUFFRCxTQUFTb0MsYUFBVCxDQUF1QnBDLENBQXZCLEVBQTBDO0FBQ3RDLFNBQU9BLENBQUMsQ0FBQ08sS0FBRixDQUFRLEdBQVIsRUFBYU8sR0FBYixDQUFpQmtCLDZCQUFqQixFQUFnRGIsSUFBaEQsQ0FBcUQsRUFBckQsQ0FBUDtBQUNIOztBQUVELFNBQVNrQixZQUFULENBQXNCckMsQ0FBdEIsRUFBeUM7QUFDckMsU0FBT2tDLDZCQUE2QixDQUFDRSxhQUFhLENBQUNwQyxDQUFELENBQWQsQ0FBcEM7QUFDSDs7QUFFTSxTQUFTc0MsaUJBQVQsQ0FBMkJDLFFBQTNCLEVBQTZDQyxTQUE3QyxFQUF3RTtBQUMzRSxTQUFRLEdBQUVELFFBQVMsR0FBRUgsYUFBYSxDQUFDSSxTQUFELENBQVksRUFBOUM7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBsZWFkaW5nU3BhY2VzQ291bnQoczogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICB3aGlsZSAoY291bnQgPCBzLmxlbmd0aCAmJiAoc1tjb3VudF0gPT09ICcgJyB8fCBzW2NvdW50XSA9PT0gJ1xcdCcpKSB7XHJcbiAgICAgICAgY291bnQgKz0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb3VudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpbGluZShzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcyA9IHMucmVwbGFjZShcIlxcclxcblwiLCBcIlxcblwiKS5yZXBsYWNlKFwiXFxuXFxyXCIsIFwiXFxuXCIpLnJlcGxhY2UoXCJcXHJcIiwgXCJcXG5cIik7XHJcbiAgICBpZiAoIXMuc3RhcnRzV2l0aChcIlxcblwiKSkge1xyXG4gICAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gcy5zcGxpdChcIlxcblwiKTtcclxuICAgIGlmIChsaW5lcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9XHJcbiAgICBsZXQgbGVhZGluZ1NwYWNlc1RvUmVtb3ZlID0gTWF0aC5taW4oLi4ubGluZXMuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICcnKS5tYXAobGVhZGluZ1NwYWNlc0NvdW50KSk7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgY29uc3QgbGVhZGluZ1NwYWNlcyA9IGxlYWRpbmdTcGFjZXNDb3VudChsaW5lc1tpXSk7XHJcbiAgICAgICAgaWYgKGxlYWRpbmdTcGFjZXMgPT09IGxpbmVzW2ldLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsaW5lc1tpXSA9ICcnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGVhZGluZ1NwYWNlcyA+PSBsZWFkaW5nU3BhY2VzVG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgbGluZXNbaV0gPSBsaW5lc1tpXS5zdWJzdHIobGVhZGluZ1NwYWNlc1RvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09ICcnKSB7XHJcbiAgICAgICAgbGluZXMuc3BsaWNlKGxpbmVzLmxlbmd0aCAtIDEsIDEpO1xyXG4gICAgfVxyXG4gICAgbGluZXMuc3BsaWNlKDAsIDEpO1xyXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBXcml0ZXIge1xyXG4gICAgcGFydHM6IHN0cmluZ1tdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucGFydHMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLnBhcnRzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVkKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydHMuam9pbignJyk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGUoLi4uc3RyaW5nczogc3RyaW5nW10pIHtcclxuICAgICAgICB0aGlzLnBhcnRzLnB1c2goLi4uc3RyaW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVMbiguLi5zdHJpbmdzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMud3JpdGUoLi4uc3RyaW5ncywgJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlQmxvY2sodGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy53cml0ZShtdWx0aWxpbmUodGV4dCkpO1xyXG4gICAgfVxyXG4gICAgd3JpdGVCbG9ja0xuKHRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMud3JpdGVMbihtdWx0aWxpbmUodGV4dCkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjb252ZXJ0Rmlyc3RMZXR0ZXJUb1VwcGVyQ2FzZShzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHMgIT09ICcnXHJcbiAgICAgICAgPyBgJHtzLnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpfSR7cy5zdWJzdHIoMSl9YFxyXG4gICAgICAgIDogcztcclxufVxyXG5cclxuZnVuY3Rpb24gY29udmVydEZpcnN0TGV0dGVyVG9Mb3dlckNhc2Uoczogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBzICE9PSAnJ1xyXG4gICAgICAgID8gYCR7cy5zdWJzdHIoMCwgMSkudG9Mb3dlckNhc2UoKX0ke3Muc3Vic3RyKDEpfWBcclxuICAgICAgICA6IHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvUGFzY2FsU3R5bGUoczogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBzLnNwbGl0KCdfJykubWFwKGNvbnZlcnRGaXJzdExldHRlclRvVXBwZXJDYXNlKS5qb2luKCcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9DYW1lbFN0eWxlKHM6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gY29udmVydEZpcnN0TGV0dGVyVG9Mb3dlckNhc2UodG9QYXNjYWxTdHlsZShzKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlRmllbGRUeXBlTmFtZSh0eXBlTmFtZTogc3RyaW5nLCBmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7dHlwZU5hbWV9JHt0b1Bhc2NhbFN0eWxlKGZpZWxkTmFtZSl9YDtcclxufVxyXG4iXX0=