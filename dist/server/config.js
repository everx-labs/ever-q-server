"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureProtocol = ensureProtocol;
exports.readConfigFile = readConfigFile;
exports.parseArangoConfig = parseArangoConfig;
exports.parseMemCachedConfig = parseMemCachedConfig;
exports.overrideDefs = overrideDefs;
exports.resolveValues = resolveValues;
exports.createConfig = createConfig;
exports.parseDataConfig = parseDataConfig;
exports.STATS = exports.programOptions = exports.slowQueries = exports.requestsMode = void 0;

var _os = _interopRequireDefault(require("os"));

var _fs = require("fs");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
/*
 * Copyright 2018-2020 TON DEV SOLUTIONS LTD.
 *
 * Licensed under the SOFTWARE EVALUATION License (the "License"); you may not use
 * this file except in compliance with the License.  You may obtain a copy of the
 * License at:
 *
 * http://www.ton.dev/licenses
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific TON DEV software governing permissions and
 * limitations under the License.
 */
const DEFAULT_LISTENER_RESTART_TIMEOUT = 1000;
const DEFAULT_ARANGO_MAX_SOCKETS = 100;
const DEFAULT_SLOW_QUERIES_ARANGO_MAX_SOCKETS = 3;
const requestsMode = {
  kafka: "kafka",
  rest: "rest"
};
exports.requestsMode = requestsMode;
const slowQueries = {
  enable: "enable",
  redirect: "redirect",
  disable: "disable"
};
exports.slowQueries = slowQueries;
const programOptions = {};
exports.programOptions = programOptions;

const toPascal = s => `${s[0].toUpperCase()}${s.substr(1).toLowerCase()}`;

const opt = (option, def, description) => {
  const words = option.split("-");
  const name = `${words[0]}${words.slice(1).map(toPascal).join("")}`;
  const env = `Q_${words.map(x => x.toUpperCase()).join("_")}`;
  programOptions[name] = {
    option: `--${option} <value>`,
    env,
    def,
    description: `${description}${def && ` (default: "${def}")`}`
  };
};

const dataOpt = prefix => {
  const o = name => `${prefix.toLowerCase().split(" ").join("-")}-${name}`;

  const d = text => `${toPascal(prefix)} ${text}`;

  opt(o("mut"), "arangodb", d("mutable db config url"));
  opt(o("hot"), "arangodb", d("hot db config url"));
  opt(o("cold"), "", d("cold db config urls (comma separated)"));
  opt(o("cache"), "", d("cache config url"));
  opt(o("counterparties"), "", d("counterparties db config url"));
};

opt("host", getIp(), "Listening address");
opt("port", "4000", "Listening port");
opt("keep-alive", "60000", "GraphQL keep alive ms");
opt("config", "", "Path to JSON configuration file");
opt("requests-mode", "kafka", "Requests mode (kafka | rest)");
opt("requests-server", "kafka:9092", "Requests server url");
opt("requests-topic", "requests", "Requests topic name");
opt("requests-max-size", "16383", "Maximum request message size in bytes");
opt("slow-queries", "redirect", "Slow queries handling (enable | redirect | disable)");
dataOpt("data");
dataOpt("slow queries");
opt("auth-endpoint", "", "Auth endpoint");
opt("mam-access-keys", "", "Access keys used to authorize mam endpoint access");
opt("jaeger-endpoint", "", "Jaeger endpoint");
opt("trace-service", "Q Server", "Trace service name");
opt("trace-tags", "", "Additional trace tags (comma separated name=value pairs)");
opt("statsd-server", "", "StatsD server (host:port)");
opt("statsd-tags", "", "Additional StatsD tags (comma separated name=value pairs)");
opt("statsd-reset-interval", "", "Interval in ms between recreations of the StatsD socket");
opt("network-name", "cinet.tonlabs.io", "Define the name of the network q-server is working with");
opt("cache-key-prefix", "Q_", "Prefix string to identify q-server keys in datacache");
opt("endpoints", "", "Alternative endpoints of q-server (comma separated addresses)"); // Stats Schema

const STATS = {
  start: "start",
  prefix: "qserver.",
  doc: {
    count: "doc.count"
  },
  post: {
    count: "post.count",
    failed: "post.failed"
  },
  query: {
    count: "query.count",
    time: "query.time",
    active: "query.active",
    failed: "query.failed",
    slow: "query.slow"
  },
  subscription: {
    count: "subscription.count",
    active: "subscription.active"
  },
  waitFor: {
    active: "waitfor.active"
  }
};
exports.STATS = STATS;

function ensureProtocol(address, defaultProtocol) {
  return /^\w+:\/\//gi.test(address) ? address : `${defaultProtocol}://${address}`;
}

function readConfigFile(configFile) {
  try {
    var _config$server, _config$server2, _config$server3, _config$requests, _config$requests2, _config$requests3, _config$requests4, _config$data, _config$data2, _config$data3, _config$data4, _config$data5, _config$slowQueries, _config$slowQueries2, _config$slowQueries3, _config$slowQueries4, _config$slowQueries5, _config$trace, _config$trace2, _config$statsd, _config$statsd2, _config$statsd3;

    const config = JSON.parse((0, _fs.readFileSync)(configFile).toString());
    return {
      Q_ENDPOINTS: config.endpoints.join(','),
      Q_HOST: (_config$server = config.server) === null || _config$server === void 0 ? void 0 : _config$server.host,
      Q_PORT: (_config$server2 = config.server) === null || _config$server2 === void 0 ? void 0 : _config$server2.port,
      Q_KEEP_ALIVE: (_config$server3 = config.server) === null || _config$server3 === void 0 ? void 0 : _config$server3.keepAlive,
      // Q_CONFIG -- doesn't make sense here
      Q_REQUESTS_MODE: (_config$requests = config.requests) === null || _config$requests === void 0 ? void 0 : _config$requests.mode,
      Q_REQUESTS_SERVER: (_config$requests2 = config.requests) === null || _config$requests2 === void 0 ? void 0 : _config$requests2.server,
      Q_REQUESTS_TOPIC: (_config$requests3 = config.requests) === null || _config$requests3 === void 0 ? void 0 : _config$requests3.topic,
      Q_REQUESTS_MAX_SIZE: (_config$requests4 = config.requests) === null || _config$requests4 === void 0 ? void 0 : _config$requests4.maxSize,
      Q_DATA_MUT: (_config$data = config.data) === null || _config$data === void 0 ? void 0 : _config$data.mut,
      Q_DATA_HOT: (_config$data2 = config.data) === null || _config$data2 === void 0 ? void 0 : _config$data2.hot,
      Q_DATA_COLD: (_config$data3 = config.data) === null || _config$data3 === void 0 ? void 0 : _config$data3.cold.join(','),
      Q_DATA_CACHE: (_config$data4 = config.data) === null || _config$data4 === void 0 ? void 0 : _config$data4.cache,
      Q_DATA_COUNTERPARTIES: (_config$data5 = config.data) === null || _config$data5 === void 0 ? void 0 : _config$data5.counterparties,
      Q_SLOW_QUERIES: (_config$slowQueries = config.slowQueries) === null || _config$slowQueries === void 0 ? void 0 : _config$slowQueries.mode,
      Q_SLOW_QUERIES_MUT: (_config$slowQueries2 = config.slowQueries) === null || _config$slowQueries2 === void 0 ? void 0 : _config$slowQueries2.mut,
      Q_SLOW_QUERIES_HOT: (_config$slowQueries3 = config.slowQueries) === null || _config$slowQueries3 === void 0 ? void 0 : _config$slowQueries3.hot,
      Q_SLOW_QUERIES_COLD: (_config$slowQueries4 = config.slowQueries) === null || _config$slowQueries4 === void 0 ? void 0 : _config$slowQueries4.cold.join(','),
      Q_SLOW_QUERIES_CACHE: (_config$slowQueries5 = config.slowQueries) === null || _config$slowQueries5 === void 0 ? void 0 : _config$slowQueries5.cache,
      Q_AUTH_ENDPOINT: config.authEndpoint,
      Q_MAM_ACCESS_KEYS: config.mamAccessKeys,
      Q_JAEGER_ENDPOINT: config.jaegerEndpoint,
      Q_TRACE_SERVICE: (_config$trace = config.trace) === null || _config$trace === void 0 ? void 0 : _config$trace.service,
      Q_TRACE_TAGS: (_config$trace2 = config.trace) === null || _config$trace2 === void 0 ? void 0 : _config$trace2.tags.join(','),
      Q_STATSD_SERVER: (_config$statsd = config.statsd) === null || _config$statsd === void 0 ? void 0 : _config$statsd.server,
      Q_STATSD_TAGS: (_config$statsd2 = config.statsd) === null || _config$statsd2 === void 0 ? void 0 : _config$statsd2.tags.join(','),
      Q_STATSD_RESET_INTERVAL: (_config$statsd3 = config.statsd) === null || _config$statsd3 === void 0 ? void 0 : _config$statsd3.resetInterval
    };
  } catch (error) {
    console.error("Error while reading config file:", error);
    return {};
  }
}

function parseArangoEndpoint(config, defMaxSockets) {
  const lowerCased = config.toLowerCase().trim();
  const hasProtocol = lowerCased.startsWith("http:") || lowerCased.startsWith("https:");
  const url = new URL(hasProtocol ? config : `https://${config}`);
  const protocol = url.protocol || "https:";
  const host = url.port || protocol.toLowerCase() === "https:" ? url.host : `${url.host}:8529`;
  const path = url.pathname !== "/" ? url.pathname : "";

  const param = name => url.searchParams.get(name) || "";

  return {
    server: `${protocol}//${host}${path}`,
    auth: url.username && `${url.username}:${url.password}`,
    name: param("name") || "blockchain",
    maxSockets: Number.parseInt(param("maxSockets")) || defMaxSockets,
    listenerRestartTimeout: Number.parseInt(param("listenerRestartTimeout")) || DEFAULT_LISTENER_RESTART_TIMEOUT
  };
}

function parseArangoEndpointList(config, defMaxSockets) {
  return config.split(",").filter(x => x.trim() !== "").map(x => parseArangoEndpoint(x, defMaxSockets));
}

function parseArangoConfig(config, defMaxSockets) {
  return parseArangoEndpointList(config, defMaxSockets)[0] || parseArangoEndpoint("", defMaxSockets);
}

function parseMemCachedConfig(config) {
  return {
    server: config
  };
}

function overrideDefs(options, defs) {
  const resolved = {};
  Object.entries(options).forEach(([name, value]) => {
    const opt = value;
    resolved[name] = { ...opt,
      def: defs[name] || opt.def
    };
  });
  return resolved;
}

function resolveValues(values, configFile, env, def) {
  const resolved = {};
  Object.entries(def).forEach(([name, value]) => {
    const opt = value;
    resolved[name] = values[name] || configFile[opt.env] || env[opt.env] || def[name].def;
  });
  return resolved;
}

function createConfig(values, configFile, env, def) {
  const resolved = resolveValues(values, configFile, env, def);
  const {
    data,
    slowQueriesData,
    networkName,
    cacheKeyPrefix
  } = parseDataConfig(resolved);
  return {
    config: resolved.config,
    server: {
      host: resolved.host,
      port: Number.parseInt(resolved.port),
      keepAlive: Number.parseInt(resolved.keepAlive)
    },
    requests: {
      mode: resolved.requestsMode,
      server: resolved.requestsServer,
      topic: resolved.requestsTopic,
      maxSize: Number.parseInt(resolved.requestsMaxSize)
    },
    data,
    slowQueries: resolved.slowQueries,
    slowQueriesData,
    authorization: {
      endpoint: resolved.authEndpoint
    },
    mamAccessKeys: new Set((resolved.mamAccessKeys || "").split(",")),
    jaeger: {
      endpoint: resolved.jaegerEndpoint,
      service: resolved.traceService,
      tags: parseTags(resolved.traceTags)
    },
    statsd: {
      resetInterval: Number.parseInt(resolved.statsdResetInterval) || 0,
      server: resolved.statsdServer,
      tags: (resolved.statsdTags || "").split(",").map(x => x.trim()).filter(x => x)
    },
    networkName,
    cacheKeyPrefix,
    endpoints: (resolved.endpoints || "").split(",").map(x => x.trim()).filter(x => x)
  };
} // Internals


function getIp() {
  const ipv4 = Object.values(_os.default.networkInterfaces()).reduce((acc, x) => acc.concat(x), []).find(x => x.family === "IPv4" && !x.internal);
  return ipv4 && ipv4.address;
}

function parseTags(s) {
  const tags = {};
  s.split(",").forEach(t => {
    const i = t.indexOf("=");

    if (i >= 0) {
      tags[t.substr(0, i)] = t.substr(i + 1);
    } else {
      tags[t] = "";
    }
  });
  return tags;
}

function parseDataConfig(values) {
  function parse(prefix, defMaxSockets) {
    const opt = suffix => values[`${prefix}${suffix}`] || "";

    const mut = parseArangoConfig(opt("Mut"), defMaxSockets);
    const hot = parseArangoConfig(opt("Hot"), defMaxSockets);
    const cold = parseArangoEndpointList(opt("Cold"), defMaxSockets);
    const cache = parseMemCachedConfig(opt("Cache"));
    const counterpartiesOpt = opt("Counterparties");
    const counterparties = counterpartiesOpt ? parseArangoConfig(counterpartiesOpt, defMaxSockets) : mut;
    return {
      mut,
      hot,
      cold,
      cache,
      counterparties
    };
  }

  const {
    networkName,
    cacheKeyPrefix
  } = values;
  return {
    data: parse("data", DEFAULT_ARANGO_MAX_SOCKETS),
    slowQueriesData: parse("slowQueries", DEFAULT_SLOW_QUERIES_ARANGO_MAX_SOCKETS),
    networkName,
    cacheKeyPrefix
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2ZXIvY29uZmlnLmpzIl0sIm5hbWVzIjpbIkRFRkFVTFRfTElTVEVORVJfUkVTVEFSVF9USU1FT1VUIiwiREVGQVVMVF9BUkFOR09fTUFYX1NPQ0tFVFMiLCJERUZBVUxUX1NMT1dfUVVFUklFU19BUkFOR09fTUFYX1NPQ0tFVFMiLCJyZXF1ZXN0c01vZGUiLCJrYWZrYSIsInJlc3QiLCJzbG93UXVlcmllcyIsImVuYWJsZSIsInJlZGlyZWN0IiwiZGlzYWJsZSIsInByb2dyYW1PcHRpb25zIiwidG9QYXNjYWwiLCJzIiwidG9VcHBlckNhc2UiLCJzdWJzdHIiLCJ0b0xvd2VyQ2FzZSIsIm9wdCIsIm9wdGlvbiIsImRlZiIsImRlc2NyaXB0aW9uIiwid29yZHMiLCJzcGxpdCIsIm5hbWUiLCJzbGljZSIsIm1hcCIsImpvaW4iLCJlbnYiLCJ4IiwiZGF0YU9wdCIsInByZWZpeCIsIm8iLCJkIiwidGV4dCIsImdldElwIiwiU1RBVFMiLCJzdGFydCIsImRvYyIsImNvdW50IiwicG9zdCIsImZhaWxlZCIsInF1ZXJ5IiwidGltZSIsImFjdGl2ZSIsInNsb3ciLCJzdWJzY3JpcHRpb24iLCJ3YWl0Rm9yIiwiZW5zdXJlUHJvdG9jb2wiLCJhZGRyZXNzIiwiZGVmYXVsdFByb3RvY29sIiwidGVzdCIsInJlYWRDb25maWdGaWxlIiwiY29uZmlnRmlsZSIsImNvbmZpZyIsIkpTT04iLCJwYXJzZSIsInRvU3RyaW5nIiwiUV9FTkRQT0lOVFMiLCJlbmRwb2ludHMiLCJRX0hPU1QiLCJzZXJ2ZXIiLCJob3N0IiwiUV9QT1JUIiwicG9ydCIsIlFfS0VFUF9BTElWRSIsImtlZXBBbGl2ZSIsIlFfUkVRVUVTVFNfTU9ERSIsInJlcXVlc3RzIiwibW9kZSIsIlFfUkVRVUVTVFNfU0VSVkVSIiwiUV9SRVFVRVNUU19UT1BJQyIsInRvcGljIiwiUV9SRVFVRVNUU19NQVhfU0laRSIsIm1heFNpemUiLCJRX0RBVEFfTVVUIiwiZGF0YSIsIm11dCIsIlFfREFUQV9IT1QiLCJob3QiLCJRX0RBVEFfQ09MRCIsImNvbGQiLCJRX0RBVEFfQ0FDSEUiLCJjYWNoZSIsIlFfREFUQV9DT1VOVEVSUEFSVElFUyIsImNvdW50ZXJwYXJ0aWVzIiwiUV9TTE9XX1FVRVJJRVMiLCJRX1NMT1dfUVVFUklFU19NVVQiLCJRX1NMT1dfUVVFUklFU19IT1QiLCJRX1NMT1dfUVVFUklFU19DT0xEIiwiUV9TTE9XX1FVRVJJRVNfQ0FDSEUiLCJRX0FVVEhfRU5EUE9JTlQiLCJhdXRoRW5kcG9pbnQiLCJRX01BTV9BQ0NFU1NfS0VZUyIsIm1hbUFjY2Vzc0tleXMiLCJRX0pBRUdFUl9FTkRQT0lOVCIsImphZWdlckVuZHBvaW50IiwiUV9UUkFDRV9TRVJWSUNFIiwidHJhY2UiLCJzZXJ2aWNlIiwiUV9UUkFDRV9UQUdTIiwidGFncyIsIlFfU1RBVFNEX1NFUlZFUiIsInN0YXRzZCIsIlFfU1RBVFNEX1RBR1MiLCJRX1NUQVRTRF9SRVNFVF9JTlRFUlZBTCIsInJlc2V0SW50ZXJ2YWwiLCJlcnJvciIsImNvbnNvbGUiLCJwYXJzZUFyYW5nb0VuZHBvaW50IiwiZGVmTWF4U29ja2V0cyIsImxvd2VyQ2FzZWQiLCJ0cmltIiwiaGFzUHJvdG9jb2wiLCJzdGFydHNXaXRoIiwidXJsIiwiVVJMIiwicHJvdG9jb2wiLCJwYXRoIiwicGF0aG5hbWUiLCJwYXJhbSIsInNlYXJjaFBhcmFtcyIsImdldCIsImF1dGgiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibWF4U29ja2V0cyIsIk51bWJlciIsInBhcnNlSW50IiwibGlzdGVuZXJSZXN0YXJ0VGltZW91dCIsInBhcnNlQXJhbmdvRW5kcG9pbnRMaXN0IiwiZmlsdGVyIiwicGFyc2VBcmFuZ29Db25maWciLCJwYXJzZU1lbUNhY2hlZENvbmZpZyIsIm92ZXJyaWRlRGVmcyIsIm9wdGlvbnMiLCJkZWZzIiwicmVzb2x2ZWQiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbHVlIiwicmVzb2x2ZVZhbHVlcyIsInZhbHVlcyIsImNyZWF0ZUNvbmZpZyIsInNsb3dRdWVyaWVzRGF0YSIsIm5ldHdvcmtOYW1lIiwiY2FjaGVLZXlQcmVmaXgiLCJwYXJzZURhdGFDb25maWciLCJyZXF1ZXN0c1NlcnZlciIsInJlcXVlc3RzVG9waWMiLCJyZXF1ZXN0c01heFNpemUiLCJhdXRob3JpemF0aW9uIiwiZW5kcG9pbnQiLCJTZXQiLCJqYWVnZXIiLCJ0cmFjZVNlcnZpY2UiLCJwYXJzZVRhZ3MiLCJ0cmFjZVRhZ3MiLCJzdGF0c2RSZXNldEludGVydmFsIiwic3RhdHNkU2VydmVyIiwic3RhdHNkVGFncyIsImlwdjQiLCJvcyIsIm5ldHdvcmtJbnRlcmZhY2VzIiwicmVkdWNlIiwiYWNjIiwiY29uY2F0IiwiZmluZCIsImZhbWlseSIsImludGVybmFsIiwidCIsImkiLCJpbmRleE9mIiwic3VmZml4IiwiY291bnRlcnBhcnRpZXNPcHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTs7QUFDQTs7OztBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXlFQSxNQUFNQSxnQ0FBZ0MsR0FBRyxJQUF6QztBQUNBLE1BQU1DLDBCQUEwQixHQUFHLEdBQW5DO0FBQ0EsTUFBTUMsdUNBQXVDLEdBQUcsQ0FBaEQ7QUFFTyxNQUFNQyxZQUFZLEdBQUc7QUFDeEJDLEVBQUFBLEtBQUssRUFBRSxPQURpQjtBQUV4QkMsRUFBQUEsSUFBSSxFQUFFO0FBRmtCLENBQXJCOztBQUtBLE1BQU1DLFdBQVcsR0FBRztBQUN2QkMsRUFBQUEsTUFBTSxFQUFFLFFBRGU7QUFFdkJDLEVBQUFBLFFBQVEsRUFBRSxVQUZhO0FBR3ZCQyxFQUFBQSxPQUFPLEVBQUU7QUFIYyxDQUFwQjs7QUFNQSxNQUFNQyxjQUE4QixHQUFHLEVBQXZDOzs7QUFFUCxNQUFNQyxRQUFRLEdBQUdDLENBQUMsSUFBSyxHQUFFQSxDQUFDLENBQUMsQ0FBRCxDQUFELENBQUtDLFdBQUws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LENBQUMsYUFBRCxFQUFnQnBELHVDQUFoQixDQUZuQjtBQUdIOEksSUFBQUEsV0FIRztBQUlIQyxJQUFBQTtBQUpHLEdBQVA7QUFNSCIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4vKlxuICogQ29weXJpZ2h0IDIwMTgtMjAyMCBUT04gREVWIFNPTFVUSU9OUyBMVEQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIFNPRlRXQVJFIEVWQUxVQVRJT04gTGljZW5zZSAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXG4gKiB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcbiAqIExpY2Vuc2UgYXQ6XG4gKlxuICogaHR0cDovL3d3dy50b24uZGV2L2xpY2Vuc2VzXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBUT04gREVWIHNvZnR3YXJlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIEBmbG93XG5cbmltcG9ydCBvcyBmcm9tIFwib3NcIjtcbmltcG9ydCB7IHJlYWRGaWxlU3luYyB9IGZyb20gXCJmc1wiO1xuXG4vLyBDb25maWcgU2NoZW1hXG5cbmV4cG9ydCB0eXBlIFFBcmFuZ29Db25maWcgPSB7XG4gICAgc2VydmVyOiBzdHJpbmcsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGF1dGg6IHN0cmluZyxcbiAgICBtYXhTb2NrZXRzOiBudW1iZXIsXG4gICAgbGlzdGVuZXJSZXN0YXJ0VGltZW91dDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgUU1lbUNhY2hlZENvbmZpZyA9IHtcbiAgICBzZXJ2ZXI6IHN0cmluZyxcbn07XG5cbmV4cG9ydCB0eXBlIFFEYXRhUHJvdmlkZXJzQ29uZmlnID0ge1xuICAgIG11dDogUUFyYW5nb0NvbmZpZztcbiAgICBob3Q6IFFBcmFuZ29Db25maWc7XG4gICAgY29sZDogUUFyYW5nb0NvbmZpZ1tdO1xuICAgIGNhY2hlOiBRTWVtQ2FjaGVkQ29uZmlnO1xuICAgIGNvdW50ZXJwYXJ0aWVzOiBRQXJhbmdvQ29uZmlnO1xufTtcblxuZXhwb3J0IHR5cGUgU2xvd1F1ZXJpZXNNb2RlID0gXCJlbmFibGVcIiB8IFwicmVkaXJlY3RcIiB8IFwiZGlzYWJsZVwiO1xuZXhwb3J0IHR5cGUgUUNvbmZpZyA9IHtcbiAgICBzZXJ2ZXI6IHtcbiAgICAgICAgaG9zdDogc3RyaW5nLFxuICAgICAgICBwb3J0OiBudW1iZXIsXG4gICAgICAgIGtlZXBBbGl2ZTogbnVtYmVyLFxuICAgIH0sXG4gICAgcmVxdWVzdHM6IHtcbiAgICAgICAgbW9kZTogXCJrYWZrYVwiIHwgXCJyZXN0XCIsXG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxuICAgICAgICB0b3BpYzogc3RyaW5nLFxuICAgICAgICBtYXhTaXplOiBudW1iZXIsXG4gICAgfSxcbiAgICBkYXRhOiBRRGF0YVByb3ZpZGVyc0NvbmZpZyxcbiAgICBzbG93UXVlcmllczogU2xvd1F1ZXJpZXNNb2RlLFxuICAgIHNsb3dRdWVyaWVzRGF0YTogUURhdGFQcm92aWRlcnNDb25maWcsXG4gICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBlbmRwb2ludDogc3RyaW5nLFxuICAgIH0sXG4gICAgamFlZ2VyOiB7XG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXG4gICAgICAgIHNlcnZpY2U6IHN0cmluZyxcbiAgICAgICAgdGFnczogeyBbc3RyaW5nXTogc3RyaW5nIH1cbiAgICB9LFxuICAgIHN0YXRzZDoge1xuICAgICAgICBzZXJ2ZXI6IHN0cmluZyxcbiAgICAgICAgdGFnczogc3RyaW5nW10sXG4gICAgICAgIHJlc2V0SW50ZXJ2YWw6IG51bWJlcixcbiAgICB9LFxuICAgIG1hbUFjY2Vzc0tleXM6IFNldDxzdHJpbmc+LFxuICAgIGlzVGVzdHM/OiBib29sZWFuLFxuICAgIG5ldHdvcmtOYW1lOiBzdHJpbmcsXG4gICAgY2FjaGVLZXlQcmVmaXg6IHN0cmluZyxcbiAgICBlbmRwb2ludHM6IHN0cmluZ1tdLFxufVxuXG5leHBvcnQgdHlwZSBQcm9ncmFtT3B0aW9uID0ge1xuICAgIG9wdGlvbjogc3RyaW5nLFxuICAgIGVudjogc3RyaW5nLFxuICAgIGRlZjogc3RyaW5nLFxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG59O1xuZXhwb3J0IHR5cGUgUHJvZ3JhbU9wdGlvbnMgPSB7IFtzdHJpbmddOiBQcm9ncmFtT3B0aW9uIH07XG5cbmNvbnN0IERFRkFVTFRfTElTVEVORVJfUkVTVEFSVF9USU1FT1VUID0gMTAwMDtcbmNvbnN0IERFRkFVTFRfQVJBTkdPX01BWF9TT0NLRVRTID0gMTAwO1xuY29uc3QgREVGQVVMVF9TTE9XX1FVRVJJRVNfQVJBTkdPX01BWF9TT0NLRVRTID0gMztcblxuZXhwb3J0IGNvbnN0IHJlcXVlc3RzTW9kZSA9IHtcbiAgICBrYWZrYTogXCJrYWZrYVwiLFxuICAgIHJlc3Q6IFwicmVzdFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHNsb3dRdWVyaWVzID0ge1xuICAgIGVuYWJsZTogXCJlbmFibGVcIixcbiAgICByZWRpcmVjdDogXCJyZWRpcmVjdFwiLFxuICAgIGRpc2FibGU6IFwiZGlzYWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHByb2dyYW1PcHRpb25zOiBQcm9ncmFtT3B0aW9ucyA9IHt9O1xuXG5jb25zdCB0b1Bhc2NhbCA9IHMgPT4gYCR7c1swXS50b1VwcGVyQ2FzZSgpfSR7cy5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKX1gO1xuXG5jb25zdCBvcHQgPSAob3B0aW9uOiBzdHJpbmcsIGRlZjogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgd29yZHMgPSBvcHRpb24uc3BsaXQoXCItXCIpO1xuICAgIGNvbnN0IG5hbWUgPSBgJHt3b3Jkc1swXX0ke3dvcmRzLnNsaWNlKDEpLm1hcCh0b1Bhc2NhbCkuam9pbihcIlwiKX1gO1xuICAgIGNvbnN0IGVudiA9IGBRXyR7d29yZHMubWFwKHggPT4geC50b1VwcGVyQ2FzZSgpKS5qb2luKFwiX1wiKX1gO1xuICAgIHByb2dyYW1PcHRpb25zW25hbWVdID0ge1xuICAgICAgICBvcHRpb246IGAtLSR7b3B0aW9ufSA8dmFsdWU+YCxcbiAgICAgICAgZW52LFxuICAgICAgICBkZWYsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHtkZXNjcmlwdGlvbn0ke2RlZiAmJiBgIChkZWZhdWx0OiBcIiR7ZGVmfVwiKWB9YCxcbiAgICB9O1xufTtcblxuY29uc3QgZGF0YU9wdCA9IChwcmVmaXg6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG8gPSBuYW1lID0+IGAke3ByZWZpeC50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKS5qb2luKFwiLVwiKX0tJHtuYW1lfWA7XG4gICAgY29uc3QgZCA9IHRleHQgPT4gYCR7dG9QYXNjYWwocHJlZml4KX0gJHt0ZXh0fWA7XG5cbiAgICBvcHQobyhcIm11dFwiKSwgXCJhcmFuZ29kYlwiLCBkKFwibXV0YWJsZSBkYiBjb25maWcgdXJsXCIpKTtcbiAgICBvcHQobyhcImhvdFwiKSwgXCJhcmFuZ29kYlwiLCBkKFwiaG90IGRiIGNvbmZpZyB1cmxcIikpO1xuICAgIG9wdChvKFwiY29sZFwiKSwgXCJcIiwgZChcImNvbGQgZGIgY29uZmlnIHVybHMgKGNvbW1hIHNlcGFyYXRlZClcIikpO1xuICAgIG9wdChvKFwiY2FjaGVcIiksIFwiXCIsIGQoXCJjYWNoZSBjb25maWcgdXJsXCIpKTtcbiAgICBvcHQobyhcImNvdW50ZXJwYXJ0aWVzXCIpLCBcIlwiLCBkKFwiY291bnRlcnBhcnRpZXMgZGIgY29uZmlnIHVybFwiKSk7XG59O1xuXG5vcHQoXCJob3N0XCIsIGdldElwKCksIFwiTGlzdGVuaW5nIGFkZHJlc3NcIik7XG5vcHQoXCJwb3J0XCIsIFwiNDAwMFwiLCBcIkxpc3RlbmluZyBwb3J0XCIpO1xub3B0KFwia2VlcC1hbGl2ZVwiLCBcIjYwMDAwXCIsIFwiR3JhcGhRTCBrZWVwIGFsaXZlIG1zXCIpO1xuXG5vcHQoXCJjb25maWdcIiwgXCJcIiwgXCJQYXRoIHRvIEpTT04gY29uZmlndXJhdGlvbiBmaWxlXCIpO1xuXG5vcHQoXCJyZXF1ZXN0cy1tb2RlXCIsIFwia2Fma2FcIiwgXCJSZXF1ZXN0cyBtb2RlIChrYWZrYSB8IHJlc3QpXCIpO1xub3B0KFwicmVxdWVzdHMtc2VydmVyXCIsIFwia2Fma2E6OTA5MlwiLCBcIlJlcXVlc3RzIHNlcnZlciB1cmxcIik7XG5vcHQoXCJyZXF1ZXN0cy10b3BpY1wiLCBcInJlcXVlc3RzXCIsIFwiUmVxdWVzdHMgdG9waWMgbmFtZVwiKTtcbm9wdChcInJlcXVlc3RzLW1heC1zaXplXCIsIFwiMTYzODNcIiwgXCJNYXhpbXVtIHJlcXVlc3QgbWVzc2FnZSBzaXplIGluIGJ5dGVzXCIpO1xuXG5vcHQoXCJzbG93LXF1ZXJpZXNcIiwgXCJyZWRpcmVjdFwiLCBcIlNsb3cgcXVlcmllcyBoYW5kbGluZyAoZW5hYmxlIHwgcmVkaXJlY3QgfCBkaXNhYmxlKVwiKTtcblxuZGF0YU9wdChcImRhdGFcIik7XG5kYXRhT3B0KFwic2xvdyBxdWVyaWVzXCIpO1xuXG5vcHQoXCJhdXRoLWVuZHBvaW50XCIsIFwiXCIsIFwiQXV0aCBlbmRwb2ludFwiKTtcbm9wdChcIm1hbS1hY2Nlc3Mta2V5c1wiLCBcIlwiLCBcIkFjY2VzcyBrZXlzIHVzZWQgdG8gYXV0aG9yaXplIG1hbSBlbmRwb2ludCBhY2Nlc3NcIik7XG5cbm9wdChcImphZWdlci1lbmRwb2ludFwiLCBcIlwiLCBcIkphZWdlciBlbmRwb2ludFwiKTtcbm9wdChcInRyYWNlLXNlcnZpY2VcIiwgXCJRIFNlcnZlclwiLCBcIlRyYWNlIHNlcnZpY2UgbmFtZVwiKTtcbm9wdChcInRyYWNlLXRhZ3NcIiwgXCJcIiwgXCJBZGRpdGlvbmFsIHRyYWNlIHRhZ3MgKGNvbW1hIHNlcGFyYXRlZCBuYW1lPXZhbHVlIHBhaXJzKVwiKTtcblxub3B0KFwic3RhdHNkLXNlcnZlclwiLCBcIlwiLCBcIlN0YXRzRCBzZXJ2ZXIgKGhvc3Q6cG9ydClcIik7XG5vcHQoXCJzdGF0c2QtdGFnc1wiLCBcIlwiLCBcIkFkZGl0aW9uYWwgU3RhdHNEIHRhZ3MgKGNvbW1hIHNlcGFyYXRlZCBuYW1lPXZhbHVlIHBhaXJzKVwiKTtcbm9wdChcInN0YXRzZC1yZXNldC1pbnRlcnZhbFwiLCBcIlwiLCBcIkludGVydmFsIGluIG1zIGJldHdlZW4gcmVjcmVhdGlvbnMgb2YgdGhlIFN0YXRzRCBzb2NrZXRcIik7XG5cbm9wdChcIm5ldHdvcmstbmFtZVwiLCBcImNpbmV0LnRvbmxhYnMuaW9cIiwgXCJEZWZpbmUgdGhlIG5hbWUgb2YgdGhlIG5ldHdvcmsgcS1zZXJ2ZXIgaXMgd29ya2luZyB3aXRoXCIpO1xuXG5vcHQoXCJjYWNoZS1rZXktcHJlZml4XCIsIFwiUV9cIiwgXCJQcmVmaXggc3RyaW5nIHRvIGlkZW50aWZ5IHEtc2VydmVyIGtleXMgaW4gZGF0YWNhY2hlXCIpO1xuXG5vcHQoXCJlbmRwb2ludHNcIiwgXCJcIiwgXCJBbHRlcm5hdGl2ZSBlbmRwb2ludHMgb2YgcS1zZXJ2ZXIgKGNvbW1hIHNlcGFyYXRlZCBhZGRyZXNzZXMpXCIpO1xuXG4vLyBTdGF0cyBTY2hlbWFcblxuZXhwb3J0IGNvbnN0IFNUQVRTID0ge1xuICAgIHN0YXJ0OiBcInN0YXJ0XCIsXG4gICAgcHJlZml4OiBcInFzZXJ2ZXIuXCIsXG4gICAgZG9jOiB7XG4gICAgICAgIGNvdW50OiBcImRvYy5jb3VudFwiLFxuICAgIH0sXG4gICAgcG9zdDoge1xuICAgICAgICBjb3VudDogXCJwb3N0LmNvdW50XCIsXG4gICAgICAgIGZhaWxlZDogXCJwb3N0LmZhaWxlZFwiLFxuICAgIH0sXG4gICAgcXVlcnk6IHtcbiAgICAgICAgY291bnQ6IFwicXVlcnkuY291bnRcIixcbiAgICAgICAgdGltZTogXCJxdWVyeS50aW1lXCIsXG4gICAgICAgIGFjdGl2ZTogXCJxdWVyeS5hY3RpdmVcIixcbiAgICAgICAgZmFpbGVkOiBcInF1ZXJ5LmZhaWxlZFwiLFxuICAgICAgICBzbG93OiBcInF1ZXJ5LnNsb3dcIixcbiAgICB9LFxuICAgIHN1YnNjcmlwdGlvbjoge1xuICAgICAgICBjb3VudDogXCJzdWJzY3JpcHRpb24uY291bnRcIixcbiAgICAgICAgYWN0aXZlOiBcInN1YnNjcmlwdGlvbi5hY3RpdmVcIixcbiAgICB9LFxuICAgIHdhaXRGb3I6IHtcbiAgICAgICAgYWN0aXZlOiBcIndhaXRmb3IuYWN0aXZlXCIsXG4gICAgfSxcbn07XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVByb3RvY29sKGFkZHJlc3M6IHN0cmluZywgZGVmYXVsdFByb3RvY29sOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiAvXlxcdys6XFwvXFwvL2dpLnRlc3QoYWRkcmVzcykgPyBhZGRyZXNzIDogYCR7ZGVmYXVsdFByb3RvY29sfTovLyR7YWRkcmVzc31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZENvbmZpZ0ZpbGUoY29uZmlnRmlsZTogc3RyaW5nKTogYW55IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjb25maWcgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhjb25maWdGaWxlKS50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFFfRU5EUE9JTlRTOiBjb25maWcuZW5kcG9pbnRzLmpvaW4oJywnKSxcbiAgICAgICAgICAgIFFfSE9TVDogY29uZmlnLnNlcnZlcj8uaG9zdCxcbiAgICAgICAgICAgIFFfUE9SVDogY29uZmlnLnNlcnZlcj8ucG9ydCxcbiAgICAgICAgICAgIFFfS0VFUF9BTElWRTogY29uZmlnLnNlcnZlcj8ua2VlcEFsaXZlLFxuICAgICAgICAgICAgLy8gUV9DT05GSUcgLS0gZG9lc24ndCBtYWtlIHNlbnNlIGhlcmVcbiAgICAgICAgICAgIFFfUkVRVUVTVFNfTU9ERTogY29uZmlnLnJlcXVlc3RzPy5tb2RlLFxuICAgICAgICAgICAgUV9SRVFVRVNUU19TRVJWRVI6IGNvbmZpZy5yZXF1ZXN0cz8uc2VydmVyLFxuICAgICAgICAgICAgUV9SRVFVRVNUU19UT1BJQzogY29uZmlnLnJlcXVlc3RzPy50b3BpYyxcbiAgICAgICAgICAgIFFfUkVRVUVTVFNfTUFYX1NJWkU6IGNvbmZpZy5yZXF1ZXN0cz8ubWF4U2l6ZSxcbiAgICAgICAgICAgIFFfREFUQV9NVVQ6IGNvbmZpZy5kYXRhPy5tdXQsXG4gICAgICAgICAgICBRX0RBVEFfSE9UOiBjb25maWcuZGF0YT8uaG90LFxuICAgICAgICAgICAgUV9EQVRBX0NPTEQ6IGNvbmZpZy5kYXRhPy5jb2xkLmpvaW4oJywnKSxcbiAgICAgICAgICAgIFFfREFUQV9DQUNIRTogY29uZmlnLmRhdGE/LmNhY2hlLFxuICAgICAgICAgICAgUV9EQVRBX0NPVU5URVJQQVJUSUVTOiBjb25maWcuZGF0YT8uY291bnRlcnBhcnRpZXMsXG4gICAgICAgICAgICBRX1NMT1dfUVVFUklFUzogY29uZmlnLnNsb3dRdWVyaWVzPy5tb2RlLFxuICAgICAgICAgICAgUV9TTE9XX1FVRVJJRVNfTVVUOiBjb25maWcuc2xvd1F1ZXJpZXM/Lm11dCxcbiAgICAgICAgICAgIFFfU0xPV19RVUVSSUVTX0hPVDogY29uZmlnLnNsb3dRdWVyaWVzPy5ob3QsXG4gICAgICAgICAgICBRX1NMT1dfUVVFUklFU19DT0xEOiBjb25maWcuc2xvd1F1ZXJpZXM/LmNvbGQuam9pbignLCcpLFxuICAgICAgICAgICAgUV9TTE9XX1FVRVJJRVNfQ0FDSEU6IGNvbmZpZy5zbG93UXVlcmllcz8uY2FjaGUsXG4gICAgICAgICAgICBRX0FVVEhfRU5EUE9JTlQ6IGNvbmZpZy5hdXRoRW5kcG9pbnQsXG4gICAgICAgICAgICBRX01BTV9BQ0NFU1NfS0VZUzogY29uZmlnLm1hbUFjY2Vzc0tleXMsXG4gICAgICAgICAgICBRX0pBRUdFUl9FTkRQT0lOVDogY29uZmlnLmphZWdlckVuZHBvaW50LFxuICAgICAgICAgICAgUV9UUkFDRV9TRVJWSUNFOiBjb25maWcudHJhY2U/LnNlcnZpY2UsXG4gICAgICAgICAgICBRX1RSQUNFX1RBR1M6IGNvbmZpZy50cmFjZT8udGFncy5qb2luKCcsJyksXG4gICAgICAgICAgICBRX1NUQVRTRF9TRVJWRVI6IGNvbmZpZy5zdGF0c2Q/LnNlcnZlcixcbiAgICAgICAgICAgIFFfU1RBVFNEX1RBR1M6IGNvbmZpZy5zdGF0c2Q/LnRhZ3Muam9pbignLCcpLFxuICAgICAgICAgICAgUV9TVEFUU0RfUkVTRVRfSU5URVJWQUw6IGNvbmZpZy5zdGF0c2Q/LnJlc2V0SW50ZXJ2YWwsXG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIHJlYWRpbmcgY29uZmlnIGZpbGU6XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VBcmFuZ29FbmRwb2ludChjb25maWc6IHN0cmluZywgZGVmTWF4U29ja2V0czogbnVtYmVyKTogUUFyYW5nb0NvbmZpZyB7XG4gICAgY29uc3QgbG93ZXJDYXNlZCA9IGNvbmZpZy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBjb25zdCBoYXNQcm90b2NvbCA9IGxvd2VyQ2FzZWQuc3RhcnRzV2l0aChcImh0dHA6XCIpIHx8IGxvd2VyQ2FzZWQuc3RhcnRzV2l0aChcImh0dHBzOlwiKTtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGhhc1Byb3RvY29sID8gY29uZmlnIDogYGh0dHBzOi8vJHtjb25maWd9YCk7XG4gICAgY29uc3QgcHJvdG9jb2wgPSB1cmwucHJvdG9jb2wgfHwgXCJodHRwczpcIjtcbiAgICBjb25zdCBob3N0ID0gKHVybC5wb3J0IHx8IHByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09IFwiaHR0cHM6XCIpID8gdXJsLmhvc3QgOiBgJHt1cmwuaG9zdH06ODUyOWA7XG4gICAgY29uc3QgcGF0aCA9IHVybC5wYXRobmFtZSAhPT0gXCIvXCIgPyB1cmwucGF0aG5hbWUgOiBcIlwiO1xuICAgIGNvbnN0IHBhcmFtID0gbmFtZSA9PiB1cmwuc2VhcmNoUGFyYW1zLmdldChuYW1lKSB8fCBcIlwiO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZlcjogYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtwYXRofWAsXG4gICAgICAgIGF1dGg6IHVybC51c2VybmFtZSAmJiBgJHt1cmwudXNlcm5hbWV9OiR7dXJsLnBhc3N3b3JkfWAsXG4gICAgICAgIG5hbWU6IHBhcmFtKFwibmFtZVwiKSB8fCBcImJsb2NrY2hhaW5cIixcbiAgICAgICAgbWF4U29ja2V0czogTnVtYmVyLnBhcnNlSW50KHBhcmFtKFwibWF4U29ja2V0c1wiKSkgfHwgZGVmTWF4U29ja2V0cyxcbiAgICAgICAgbGlzdGVuZXJSZXN0YXJ0VGltZW91dDogTnVtYmVyLnBhcnNlSW50KHBhcmFtKFwibGlzdGVuZXJSZXN0YXJ0VGltZW91dFwiKSkgfHwgREVGQVVMVF9MSVNURU5FUl9SRVNUQVJUX1RJTUVPVVQsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VBcmFuZ29FbmRwb2ludExpc3QoY29uZmlnOiBzdHJpbmcsIGRlZk1heFNvY2tldHM6IG51bWJlcik6IFFBcmFuZ29Db25maWdbXSB7XG4gICAgcmV0dXJuIGNvbmZpZ1xuICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgIC5maWx0ZXIoeCA9PiB4LnRyaW0oKSAhPT0gXCJcIilcbiAgICAgICAgLm1hcCh4ID0+IHBhcnNlQXJhbmdvRW5kcG9pbnQoeCwgZGVmTWF4U29ja2V0cykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcmFuZ29Db25maWcoY29uZmlnOiBzdHJpbmcsIGRlZk1heFNvY2tldHM6IG51bWJlcik6IFFBcmFuZ29Db25maWcge1xuICAgIHJldHVybiBwYXJzZUFyYW5nb0VuZHBvaW50TGlzdChjb25maWcsIGRlZk1heFNvY2tldHMpWzBdXG4gICAgICAgIHx8IHBhcnNlQXJhbmdvRW5kcG9pbnQoXCJcIiwgZGVmTWF4U29ja2V0cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU1lbUNhY2hlZENvbmZpZyhjb25maWc6IHN0cmluZyk6IFFNZW1DYWNoZWRDb25maWcge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZlcjogY29uZmlnLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvdmVycmlkZURlZnMob3B0aW9uczogUHJvZ3JhbU9wdGlvbnMsIGRlZnM6IGFueSk6IFByb2dyYW1PcHRpb25zIHtcbiAgICBjb25zdCByZXNvbHZlZCA9IHt9O1xuICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZvckVhY2goKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgY29uc3Qgb3B0ID0gKCh2YWx1ZTogYW55KTogUHJvZ3JhbU9wdGlvbik7XG4gICAgICAgIHJlc29sdmVkW25hbWVdID0ge1xuICAgICAgICAgICAgLi4ub3B0LFxuICAgICAgICAgICAgZGVmOiBkZWZzW25hbWVdIHx8IG9wdC5kZWYsXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVZhbHVlcyh2YWx1ZXM6IGFueSwgY29uZmlnRmlsZTogYW55LCBlbnY6IGFueSwgZGVmOiBQcm9ncmFtT3B0aW9ucyk6IGFueSB7XG4gICAgY29uc3QgcmVzb2x2ZWQgPSB7fTtcbiAgICBPYmplY3QuZW50cmllcyhkZWYpLmZvckVhY2goKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgY29uc3Qgb3B0ID0gKCh2YWx1ZTogYW55KTogUHJvZ3JhbU9wdGlvbik7XG4gICAgICAgIHJlc29sdmVkW25hbWVdID0gdmFsdWVzW25hbWVdIHx8IGNvbmZpZ0ZpbGVbb3B0LmVudl0gfHwgZW52W29wdC5lbnZdIHx8IGRlZltuYW1lXS5kZWY7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc29sdmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ29uZmlnKFxuICAgIHZhbHVlczogYW55LFxuICAgIGNvbmZpZ0ZpbGU6IGFueSxcbiAgICBlbnY6IGFueSxcbiAgICBkZWY6IFByb2dyYW1PcHRpb25zLFxuKTogUUNvbmZpZyB7XG4gICAgY29uc3QgcmVzb2x2ZWQgPSByZXNvbHZlVmFsdWVzKHZhbHVlcywgY29uZmlnRmlsZSwgZW52LCBkZWYpO1xuICAgIGNvbnN0IHsgZGF0YSwgc2xvd1F1ZXJpZXNEYXRhLCBuZXR3b3JrTmFtZSwgY2FjaGVLZXlQcmVmaXggfSA9IHBhcnNlRGF0YUNvbmZpZyhyZXNvbHZlZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25maWc6IHJlc29sdmVkLmNvbmZpZywgXG4gICAgICAgIHNlcnZlcjoge1xuICAgICAgICAgICAgaG9zdDogcmVzb2x2ZWQuaG9zdCxcbiAgICAgICAgICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChyZXNvbHZlZC5wb3J0KSxcbiAgICAgICAgICAgIGtlZXBBbGl2ZTogTnVtYmVyLnBhcnNlSW50KHJlc29sdmVkLmtlZXBBbGl2ZSksXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3RzOiB7XG4gICAgICAgICAgICBtb2RlOiByZXNvbHZlZC5yZXF1ZXN0c01vZGUsXG4gICAgICAgICAgICBzZXJ2ZXI6IHJlc29sdmVkLnJlcXVlc3RzU2VydmVyLFxuICAgICAgICAgICAgdG9waWM6IHJlc29sdmVkLnJlcXVlc3RzVG9waWMsXG4gICAgICAgICAgICBtYXhTaXplOiBOdW1iZXIucGFyc2VJbnQocmVzb2x2ZWQucmVxdWVzdHNNYXhTaXplKSxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgc2xvd1F1ZXJpZXM6IHJlc29sdmVkLnNsb3dRdWVyaWVzLFxuICAgICAgICBzbG93UXVlcmllc0RhdGEsXG4gICAgICAgIGF1dGhvcml6YXRpb246IHtcbiAgICAgICAgICAgIGVuZHBvaW50OiByZXNvbHZlZC5hdXRoRW5kcG9pbnQsXG4gICAgICAgIH0sXG4gICAgICAgIG1hbUFjY2Vzc0tleXM6IG5ldyBTZXQoKHJlc29sdmVkLm1hbUFjY2Vzc0tleXMgfHwgXCJcIikuc3BsaXQoXCIsXCIpKSxcbiAgICAgICAgamFlZ2VyOiB7XG4gICAgICAgICAgICBlbmRwb2ludDogcmVzb2x2ZWQuamFlZ2VyRW5kcG9pbnQsXG4gICAgICAgICAgICBzZXJ2aWNlOiByZXNvbHZlZC50cmFjZVNlcnZpY2UsXG4gICAgICAgICAgICB0YWdzOiBwYXJzZVRhZ3MocmVzb2x2ZWQudHJhY2VUYWdzKSxcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdHNkOiB7XG4gICAgICAgICAgICByZXNldEludGVydmFsOiBOdW1iZXIucGFyc2VJbnQocmVzb2x2ZWQuc3RhdHNkUmVzZXRJbnRlcnZhbCkgfHwgMCxcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWQuc3RhdHNkU2VydmVyLFxuICAgICAgICAgICAgdGFnczogKHJlc29sdmVkLnN0YXRzZFRhZ3MgfHwgXCJcIikuc3BsaXQoXCIsXCIpLm1hcCh4ID0+IHgudHJpbSgpKS5maWx0ZXIoeCA9PiB4KSxcbiAgICAgICAgfSxcbiAgICAgICAgbmV0d29ya05hbWUsXG4gICAgICAgIGNhY2hlS2V5UHJlZml4LFxuICAgICAgICBlbmRwb2ludHM6IChyZXNvbHZlZC5lbmRwb2ludHMgfHwgXCJcIikuc3BsaXQoXCIsXCIpLm1hcCh4ID0+IHgudHJpbSgpKS5maWx0ZXIoeCA9PiB4KSxcbiAgICB9O1xufVxuXG4vLyBJbnRlcm5hbHNcblxuZnVuY3Rpb24gZ2V0SXAoKTogc3RyaW5nIHtcbiAgICBjb25zdCBpcHY0ID0gKE9iamVjdC52YWx1ZXMob3MubmV0d29ya0ludGVyZmFjZXMoKSk6IGFueSlcbiAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiBhY2MuY29uY2F0KHgpLCBbXSlcbiAgICAgICAgLmZpbmQoeCA9PiB4LmZhbWlseSA9PT0gXCJJUHY0XCIgJiYgIXguaW50ZXJuYWwpO1xuICAgIHJldHVybiBpcHY0ICYmIGlwdjQuYWRkcmVzcztcbn1cblxuXG5mdW5jdGlvbiBwYXJzZVRhZ3Moczogc3RyaW5nKTogeyBbc3RyaW5nXTogc3RyaW5nIH0ge1xuICAgIGNvbnN0IHRhZ3M6IHsgW3N0cmluZ106IHN0cmluZyB9ID0ge307XG4gICAgcy5zcGxpdChcIixcIikuZm9yRWFjaCgodCkgPT4ge1xuICAgICAgICBjb25zdCBpID0gdC5pbmRleE9mKFwiPVwiKTtcbiAgICAgICAgaWYgKGkgPj0gMCkge1xuICAgICAgICAgICAgdGFnc1t0LnN1YnN0cigwLCBpKV0gPSB0LnN1YnN0cihpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YWdzW3RdID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0YWdzO1xuXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGF0YUNvbmZpZyh2YWx1ZXM6IGFueSk6IHtcbiAgICBkYXRhOiBRRGF0YVByb3ZpZGVyc0NvbmZpZyxcbiAgICBzbG93UXVlcmllc0RhdGE6IFFEYXRhUHJvdmlkZXJzQ29uZmlnLFxuICAgIG5ldHdvcmtOYW1lOiBzdHJpbmcsXG4gICAgY2FjaGVLZXlQcmVmaXg6IHN0cmluZyxcbn0ge1xuICAgIGZ1bmN0aW9uIHBhcnNlKHByZWZpeDogc3RyaW5nLCBkZWZNYXhTb2NrZXRzOiBudW1iZXIpOiBRRGF0YVByb3ZpZGVyc0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IG9wdCA9IChzdWZmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB2YWx1ZXNbYCR7cHJlZml4fSR7c3VmZml4fWBdIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IG11dCA9IHBhcnNlQXJhbmdvQ29uZmlnKG9wdChcIk11dFwiKSwgZGVmTWF4U29ja2V0cyk7XG4gICAgICAgIGNvbnN0IGhvdCA9IHBhcnNlQXJhbmdvQ29uZmlnKG9wdChcIkhvdFwiKSwgZGVmTWF4U29ja2V0cyk7XG4gICAgICAgIGNvbnN0IGNvbGQgPSBwYXJzZUFyYW5nb0VuZHBvaW50TGlzdChvcHQoXCJDb2xkXCIpLCBkZWZNYXhTb2NrZXRzKTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSBwYXJzZU1lbUNhY2hlZENvbmZpZyhvcHQoXCJDYWNoZVwiKSk7XG4gICAgICAgIGNvbnN0IGNvdW50ZXJwYXJ0aWVzT3B0ID0gb3B0KFwiQ291bnRlcnBhcnRpZXNcIik7XG4gICAgICAgIGNvbnN0IGNvdW50ZXJwYXJ0aWVzID0gY291bnRlcnBhcnRpZXNPcHRcbiAgICAgICAgICAgID8gcGFyc2VBcmFuZ29Db25maWcoY291bnRlcnBhcnRpZXNPcHQsIGRlZk1heFNvY2tldHMpXG4gICAgICAgICAgICA6IG11dDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG11dCxcbiAgICAgICAgICAgIGhvdCxcbiAgICAgICAgICAgIGNvbGQsXG4gICAgICAgICAgICBjYWNoZSxcbiAgICAgICAgICAgIGNvdW50ZXJwYXJ0aWVzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgbmV0d29ya05hbWUsIGNhY2hlS2V5UHJlZml4IH0gPSB2YWx1ZXM7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBwYXJzZShcImRhdGFcIiwgREVGQVVMVF9BUkFOR09fTUFYX1NPQ0tFVFMpLFxuICAgICAgICBzbG93UXVlcmllc0RhdGE6IHBhcnNlKFwic2xvd1F1ZXJpZXNcIiwgREVGQVVMVF9TTE9XX1FVRVJJRVNfQVJBTkdPX01BWF9TT0NLRVRTKSxcbiAgICAgICAgbmV0d29ya05hbWUsXG4gICAgICAgIGNhY2hlS2V5UHJlZml4LFxuICAgIH07XG59XG4iXX0=