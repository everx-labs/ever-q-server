"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureProtocol = ensureProtocol;
exports.resolveOptions = resolveOptions;
exports.createConfig = createConfig;
exports.STATS = exports.BLOCKCHAIN_DB = exports.defaultOptions = exports.QRequestsMode = void 0;

var _os = _interopRequireDefault(require("os"));

var _dbTypes = require("./db-types");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright 2018-2020 TON DEV SOLUTIONS LTD.
 *
 * Licensed under the SOFTWARE EVALUATION License (the "License"); you may not use
 * this file except in compliance with the License.  You may obtain a copy of the
 * License at:
 *
 * http://www.ton.dev/licenses
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific TON DEV software governing permissions and
 * limitations under the License.
 */
const QRequestsMode = {
  kafka: 'kafka',
  rest: 'rest'
};
exports.QRequestsMode = QRequestsMode;

function ensureProtocol(address, defaultProtocol) {
  return /^\w+:\/\//gi.test(address) ? address : `${defaultProtocol}://${address}`;
}

function getIp() {
  const ipv4 = Object.values(_os.default.networkInterfaces()).reduce((acc, x) => acc.concat(x), []).find(x => x.family === 'IPv4' && !x.internal);
  return ipv4 && ipv4.address;
}

function parseTags(s) {
  const tags = {};
  s.split(',').forEach(t => {
    const i = t.indexOf('=');

    if (i >= 0) {
      tags[t.substr(0, i)] = t.substr(i + 1);
    } else {
      tags[t] = '';
    }
  });
  return tags;
}

const defaultOptions = {
  host: getIp(),
  port: '4000',
  rpcPort: '',
  requestsMode: 'kafka',
  requestsServer: 'kafka:9092',
  requestsTopic: 'requests',
  dbServer: 'arangodb:8529',
  dbName: 'blockchain',
  dbAuth: '',
  dbMaxSockets: '100',
  slowDbServer: '',
  slowDbName: '',
  slowDbAuth: '',
  slowDbMaxSockets: '3',
  authEndpoint: '',
  mamAccessKeys: '',
  jaegerEndpoint: '',
  traceService: 'Q Server',
  traceTags: '',
  statsdServer: '',
  statsdTags: '',
  keepAlive: '60000'
};
exports.defaultOptions = defaultOptions;

function resolveOptions(options, env, defaults) {
  return {
    host: options.host || env.Q_SERVER_HOST || defaults.host,
    port: options.port || env.Q_SERVER_PORT || defaults.port,
    rpcPort: options.rpcPort || env.Q_SERVER_RPC_PORT || defaults.rpcPort,
    requestsMode: options.requestsMode || env.Q_REQUESTS_MODE || defaults.requestsMode,
    requestsServer: options.requestsServer || env.Q_REQUESTS_SERVER || defaults.requestsServer,
    requestsTopic: options.requestsTopic || env.Q_REQUESTS_TOPIC || defaults.requestsTopic,
    dbServer: options.dbServer || env.Q_DATABASE_SERVER || defaults.dbServer,
    dbName: options.dbName || env.Q_DATABASE_NAME || defaults.dbName,
    dbAuth: options.dbAuth || env.Q_DATABASE_AUTH || defaults.dbAuth,
    dbMaxSockets: options.dbMaxSockets || env.Q_DATABASE_MAX_SOCKETS || defaults.dbMaxSockets,
    slowDbServer: options.slowDbServer || env.Q_SLOW_DATABASE_SERVER || defaults.slowDbServer,
    slowDbName: options.slowDbName || env.Q_SLOW_DATABASE_NAME || defaults.slowDbName,
    slowDbAuth: options.slowDbAuth || env.Q_SLOW_DATABASE_AUTH || defaults.slowDbAuth,
    slowDbMaxSockets: options.slowDbMaxSockets || env.Q_SLOW_DATABASE_MAX_SOCKETS || defaults.slowDbMaxSockets,
    authEndpoint: options.authEndpoint || env.Q_AUTH_ENDPOINT || defaults.authEndpoint,
    mamAccessKeys: options.mamAccessKeys || env.Q_MAM_ACCESS_KEYS || defaults.mamAccessKeys,
    jaegerEndpoint: options.jaegerEndpoint || env.Q_JAEGER_ENDPOINT || defaults.jaegerEndpoint,
    traceService: options.traceService || env.Q_TRACE_SERVICE || defaults.traceService,
    traceTags: options.traceTags || env.Q_TRACE_TAGS || defaults.traceTags,
    statsdServer: options.statsdServer || env.Q_STATSD_SERVER || defaults.statsdServer,
    statsdTags: options.statsdTags || env.Q_STATSD_TAGS || defaults.statsdTags,
    keepAlive: options.keepAlive || env.Q_KEEP_ALIVE || defaults.keepAlive
  };
}

function createConfig(options, env, defaults) {
  const resolvedOptions = resolveOptions(options, env, defaults);
  return {
    server: {
      host: resolvedOptions.host,
      port: Number.parseInt(resolvedOptions.port),
      rpcPort: resolvedOptions.rpcPort,
      keepAlive: Number.parseInt(resolvedOptions.keepAlive)
    },
    requests: {
      mode: resolvedOptions.requestsMode,
      server: resolvedOptions.requestsServer,
      topic: resolvedOptions.requestsTopic
    },
    database: {
      server: resolvedOptions.dbServer,
      name: resolvedOptions.dbName,
      auth: resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.dbMaxSockets)
    },
    slowDatabase: {
      server: resolvedOptions.slowDbServer || resolvedOptions.dbServer,
      name: resolvedOptions.slowDbName || resolvedOptions.dbName,
      auth: resolvedOptions.slowDbAuth || resolvedOptions.dbAuth,
      maxSockets: Number(resolvedOptions.slowDbMaxSockets)
    },
    listener: {
      restartTimeout: 1000
    },
    authorization: {
      endpoint: resolvedOptions.authEndpoint
    },
    jaeger: {
      endpoint: resolvedOptions.jaegerEndpoint,
      service: resolvedOptions.traceService,
      tags: parseTags(resolvedOptions.traceTags)
    },
    statsd: {
      server: resolvedOptions.statsdServer,
      tags: (resolvedOptions.statsdTags || '').split(',').map(x => x.trim()).filter(x => x)
    },
    mamAccessKeys: new Set((resolvedOptions.mamAccessKeys || '').split(','))
  };
}

function sortedIndex(fields) {
  return {
    type: 'persistent',
    fields
  };
}

const BLOCKCHAIN = {
  name: 'blockchain',
  collections: {
    blocks: {
      indexes: [sortedIndex(['seq_no', 'gen_utime']), sortedIndex(['gen_utime']), sortedIndex(['workchain_id', 'shard', 'seq_no']), sortedIndex(['workchain_id', 'shard', 'gen_utime']), sortedIndex(['workchain_id', 'seq_no']), sortedIndex(['workchain_id', 'gen_utime']), sortedIndex(['master.min_shard_gen_utime']), sortedIndex(['prev_ref.root_hash', '_key']), sortedIndex(['prev_alt_ref.root_hash', '_key'])]
    },
    accounts: {
      indexes: [sortedIndex(['last_trans_lt']), sortedIndex(['balance'])]
    },
    messages: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['value', 'created_at']), sortedIndex(['src', 'value', 'created_at']), sortedIndex(['dst', 'value', 'created_at']), sortedIndex(['src', 'created_at']), sortedIndex(['dst', 'created_at']), sortedIndex(['created_lt']), sortedIndex(['created_at'])]
    },
    transactions: {
      indexes: [sortedIndex(['block_id']), sortedIndex(['in_msg']), sortedIndex(['out_msgs[*]']), sortedIndex(['account_addr', 'now']), sortedIndex(['now']), sortedIndex(['lt']), sortedIndex(['account_addr', 'orig_status', 'end_status']), sortedIndex(['now', 'account_addr', 'lt'])]
    },
    blocks_signatures: {
      indexes: [sortedIndex(['signatures[*].node_id', 'gen_utime'])]
    }
  }
};
const BLOCKCHAIN_DB = { ...BLOCKCHAIN,
  lastUpdateTime: 0
};
exports.BLOCKCHAIN_DB = BLOCKCHAIN_DB;
Object.entries(BLOCKCHAIN.collections).forEach(([name, collectionMixed]) => {
  const collection = collectionMixed;
  collection.name = name;
  collection.indexes.push({
    fields: ['_key']
  });
});
const STATS = {
  start: 'start',
  prefix: 'qserver.',
  doc: {
    count: 'doc.count'
  },
  post: {
    count: 'post.count',
    failed: 'post.failed'
  },
  query: {
    count: 'query.count',
    time: 'query.time',
    active: 'query.active',
    failed: 'query.failed',
    slow: 'query.slow'
  },
  subscription: {
    active: 'subscription.active'
  },
  waitFor: {
    active: 'waitfor.active'
  }
};
exports.STATS = STATS;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9jb25maWcuanMiXSwibmFtZXMiOlsiUVJlcXVlc3RzTW9kZSIsImthZmthIiwicmVzdCIsImVuc3VyZVByb3RvY29sIiwiYWRkcmVzcyIsImRlZmF1bHRQcm90b2NvbCIsInRlc3QiLCJnZXRJcCIsImlwdjQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJvcyIsIm5ldHdvcmtJbnRlcmZhY2VzIiwicmVkdWNlIiwiYWNjIiwieCIsImNvbmNhdCIsImZpbmQiLCJmYW1pbHkiLCJpbnRlcm5hbCIsInBhcnNlVGFncyIsInMiLCJ0YWdzIiwic3BsaXQiLCJmb3JFYWNoIiwidCIsImkiLCJpbmRleE9mIiwic3Vic3RyIiwiZGVmYXVsdE9wdGlvbnMiLCJob3N0IiwicG9ydCIsInJwY1BvcnQiLCJyZXF1ZXN0c01vZGUiLCJyZXF1ZXN0c1NlcnZlciIsInJlcXVlc3RzVG9waWMiLCJkYlNlcnZlciIsImRiTmFtZSIsImRiQXV0aCIsImRiTWF4U29ja2V0cyIsInNsb3dEYlNlcnZlciIsInNsb3dEYk5hbWUiLCJzbG93RGJBdXRoIiwic2xvd0RiTWF4U29ja2V0cyIsImF1dGhFbmRwb2ludCIsIm1hbUFjY2Vzc0tleXMiLCJqYWVnZXJFbmRwb2ludCIsInRyYWNlU2VydmljZSIsInRyYWNlVGFncyIsInN0YXRzZFNlcnZlciIsInN0YXRzZFRhZ3MiLCJrZWVwQWxpdmUiLCJyZXNvbHZlT3B0aW9ucyIsIm9wdGlvbnMiLCJlbnYiLCJkZWZhdWx0cyIsIlFfU0VSVkVSX0hPU1QiLCJRX1NFUlZFUl9QT1JUIiwiUV9TRVJWRVJfUlBDX1BPUlQiLCJRX1JFUVVFU1RTX01PREUiLCJRX1JFUVVFU1RTX1NFUlZFUiIsIlFfUkVRVUVTVFNfVE9QSUMiLCJRX0RBVEFCQVNFX1NFUlZFUiIsIlFfREFUQUJBU0VfTkFNRSIsIlFfREFUQUJBU0VfQVVUSCIsIlFfREFUQUJBU0VfTUFYX1NPQ0tFVFMiLCJRX1NMT1dfREFUQUJBU0VfU0VSVkVSIiwiUV9TTE9XX0RBVEFCQVNFX05BTUUiLCJRX1NMT1dfREFUQUJBU0VfQVVUSCIsIlFfU0xPV19EQVRBQkFTRV9NQVhfU09DS0VUUyIsIlFfQVVUSF9FTkRQT0lOVCIsIlFfTUFNX0FDQ0VTU19LRVlTIiwiUV9KQUVHRVJfRU5EUE9JTlQiLCJRX1RSQUNFX1NFUlZJQ0UiLCJRX1RSQUNFX1RBR1MiLCJRX1NUQVRTRF9TRVJWRVIiLCJRX1NUQVRTRF9UQUdTIiwiUV9LRUVQX0FMSVZFIiwiY3JlYXRlQ29uZmlnIiwicmVzb2x2ZWRPcHRpb25zIiwic2VydmVyIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJyZXF1ZXN0cyIsIm1vZGUiLCJ0b3BpYyIsImRhdGFiYXNlIiwibmFtZSIsImF1dGgiLCJtYXhTb2NrZXRzIiwic2xvd0RhdGFiYXNlIiwibGlzdGVuZXIiLCJyZXN0YXJ0VGltZW91dCIsImF1dGhvcml6YXRpb24iLCJlbmRwb2ludCIsImphZWdlciIsInNlcnZpY2UiLCJzdGF0c2QiLCJtYXAiLCJ0cmltIiwiZmlsdGVyIiwiU2V0Iiwic29ydGVkSW5kZXgiLCJmaWVsZHMiLCJ0eXBlIiwiQkxPQ0tDSEFJTiIsImNvbGxlY3Rpb25zIiwiYmxvY2tzIiwiaW5kZXhlcyIsImFjY291bnRzIiwibWVzc2FnZXMiLCJ0cmFuc2FjdGlvbnMiLCJibG9ja3Nfc2lnbmF0dXJlcyIsIkJMT0NLQ0hBSU5fREIiLCJsYXN0VXBkYXRlVGltZSIsImVudHJpZXMiLCJjb2xsZWN0aW9uTWl4ZWQiLCJjb2xsZWN0aW9uIiwicHVzaCIsIlNUQVRTIiwic3RhcnQiLCJwcmVmaXgiLCJkb2MiLCJjb3VudCIsInBvc3QiLCJmYWlsZWQiLCJxdWVyeSIsInRpbWUiLCJhY3RpdmUiLCJzbG93Iiwic3Vic2NyaXB0aW9uIiwid2FpdEZvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQWtCQTs7QUFDQTs7OztBQW5CQTs7Ozs7Ozs7Ozs7Ozs7O0FBcUJPLE1BQU1BLGFBQWEsR0FBRztBQUN6QkMsRUFBQUEsS0FBSyxFQUFFLE9BRGtCO0FBRXpCQyxF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QUFFO0FBRmlCLENBQTlCOztBQUtQekcsTUFBTSxDQUFDMEcsT0FBUCxDQUFlVixVQUFVLENBQUNDLFdBQTFCLEVBQXVDbEYsT0FBdkMsQ0FBK0MsQ0FBQyxDQUFDK0QsSUFBRCxFQUFPNkIsZUFBUCxDQUFELEtBQTZCO0FBQ3hFLFFBQU1DLFVBQVUsR0FBS0QsZUFBckI7QUFDQUMsRUFBQUEsVUFBVSxDQUFDOUIsSUFBWCxHQUFrQkEsSUFBbEI7QUFDQThCLEVBQUFBLFVBQVUsQ0FBQ1QsT0FBWCxDQUFtQlUsSUFBbkIsQ0FBd0I7QUFBRWYsSUFBQUEsTUFBTSxFQUFFLENBQUMsTUFBRDtBQUFWLEdBQXhCO0FBQ0gsQ0FKRDtBQU1PLE1BQU1nQixLQUFLLEdBQUc7QUFDakJDLEVBQUFBLEtBQUssRUFBRSxPQURVO0FBRWpCQyxFQUFBQSxNQUFNLEVBQUUsVUFGUztBQUdqQkMsRUFBQUEsR0FBRyxFQUFFO0FBQ0RDLElBQUFBLEtBQUssRUFBRTtBQUROLEdBSFk7QUFNakJDLEVBQUFBLElBQUksRUFBRTtBQUNGRCxJQUFBQSxLQUFLLEVBQUUsWUFETDtBQUVGRSxJQUFBQSxNQUFNLEVBQUU7QUFGTixHQU5XO0FBVWpCQyxFQUFBQSxLQUFLLEVBQUU7QUFDSEgsSUFBQUEsS0FBSyxFQUFFLGFBREo7QUFFSEksSUFBQUEsSUFBSSxFQUFFLFlBRkg7QUFHSEMsSUFBQUEsTUFBTSxFQUFFLGNBSEw7QUFJSEgsSUFBQUEsTUFBTSxFQUFFLGNBSkw7QUFLSEksSUFBQUEsSUFBSSxFQUFFO0FBTEgsR0FWVTtBQWlCakJDLEVBQUFBLFlBQVksRUFBRTtBQUNWRixJQUFBQSxNQUFNLEVBQUU7QUFERSxHQWpCRztBQW9CakJHLEVBQUFBLE9BQU8sRUFBRTtBQUNMSCxJQUFBQSxNQUFNLEVBQUU7QUFESDtBQXBCUSxDQUFkIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQ29weXJpZ2h0IDIwMTgtMjAyMCBUT04gREVWIFNPTFVUSU9OUyBMVEQuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBTT0ZUV0FSRSBFVkFMVUFUSU9OIExpY2Vuc2UgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG4gKiB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuICogTGljZW5zZSBhdDpcclxuICpcclxuICogaHR0cDovL3d3dy50b24uZGV2L2xpY2Vuc2VzXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgVE9OIERFViBzb2Z0d2FyZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbi8vIEBmbG93XHJcblxyXG5pbXBvcnQgb3MgZnJvbSAnb3MnO1xyXG5pbXBvcnQgeyBwYXJzZUluZGV4IH0gZnJvbSAnLi9kYi10eXBlcyc7XHJcblxyXG5leHBvcnQgY29uc3QgUVJlcXVlc3RzTW9kZSA9IHtcclxuICAgIGthZmthOiAna2Fma2EnLFxyXG4gICAgcmVzdDogJ3Jlc3QnLFxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgUURiQ29uZmlnID0ge1xyXG4gICAgc2VydmVyOiBzdHJpbmcsXHJcbiAgICBuYW1lOiBzdHJpbmcsXHJcbiAgICBhdXRoOiBzdHJpbmcsXHJcbiAgICBtYXhTb2NrZXRzOiBudW1iZXIsXHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBRQ29uZmlnID0ge1xyXG4gICAgc2VydmVyOiB7XHJcbiAgICAgICAgaG9zdDogc3RyaW5nLFxyXG4gICAgICAgIHBvcnQ6IG51bWJlcixcclxuICAgICAgICBycGNQb3J0OiBzdHJpbmcsXHJcbiAgICAgICAga2VlcEFsaXZlOiBudW1iZXIsXHJcbiAgICB9LFxyXG4gICAgcmVxdWVzdHM6IHtcclxuICAgICAgICBtb2RlOiAna2Fma2EnIHwgJ3Jlc3QnLFxyXG4gICAgICAgIHNlcnZlcjogc3RyaW5nLFxyXG4gICAgICAgIHRvcGljOiBzdHJpbmcsXHJcbiAgICB9LFxyXG4gICAgZGF0YWJhc2U6IFFEYkNvbmZpZyxcclxuICAgIHNsb3dEYXRhYmFzZTogUURiQ29uZmlnLFxyXG4gICAgbGlzdGVuZXI6IHtcclxuICAgICAgICByZXN0YXJ0VGltZW91dDogbnVtYmVyXHJcbiAgICB9LFxyXG4gICAgYXV0aG9yaXphdGlvbjoge1xyXG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXHJcbiAgICB9LFxyXG4gICAgamFlZ2VyOiB7XHJcbiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZyxcclxuICAgICAgICBzZXJ2aWNlOiBzdHJpbmcsXHJcbiAgICAgICAgdGFnczogeyBbc3RyaW5nXTogc3RyaW5nIH1cclxuICAgIH0sXHJcbiAgICBzdGF0c2Q6IHtcclxuICAgICAgICBzZXJ2ZXI6IHN0cmluZyxcclxuICAgICAgICB0YWdzOiBzdHJpbmdbXSxcclxuICAgIH0sXHJcbiAgICBtYW1BY2Nlc3NLZXlzOiBTZXQ8c3RyaW5nPixcclxuICAgIGlzVGVzdHM/OiBib29sZWFuLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBQcm9ncmFtT3B0aW9ucyA9IHtcclxuICAgIHJlcXVlc3RzTW9kZTogJ2thZmthJyB8ICdyZXN0JyxcclxuICAgIHJlcXVlc3RzU2VydmVyOiBzdHJpbmcsXHJcbiAgICByZXF1ZXN0c1RvcGljOiBzdHJpbmcsXHJcbiAgICBkYlNlcnZlcjogc3RyaW5nLFxyXG4gICAgZGJOYW1lOiBzdHJpbmcsXHJcbiAgICBkYkF1dGg6IHN0cmluZyxcclxuICAgIGRiTWF4U29ja2V0czogc3RyaW5nLFxyXG4gICAgc2xvd0RiU2VydmVyOiBzdHJpbmcsXHJcbiAgICBzbG93RGJOYW1lOiBzdHJpbmcsXHJcbiAgICBzbG93RGJBdXRoOiBzdHJpbmcsXHJcbiAgICBzbG93RGJNYXhTb2NrZXRzOiBzdHJpbmcsXHJcbiAgICBob3N0OiBzdHJpbmcsXHJcbiAgICBwb3J0OiBzdHJpbmcsXHJcbiAgICBycGNQb3J0OiBzdHJpbmcsXHJcbiAgICBqYWVnZXJFbmRwb2ludDogc3RyaW5nLFxyXG4gICAgdHJhY2VTZXJ2aWNlOiBzdHJpbmcsXHJcbiAgICB0cmFjZVRhZ3M6IHN0cmluZyxcclxuICAgIGF1dGhFbmRwb2ludDogc3RyaW5nLFxyXG4gICAgc3RhdHNkU2VydmVyOiBzdHJpbmcsXHJcbiAgICBzdGF0c2RUYWdzOiBzdHJpbmcsXHJcbiAgICBtYW1BY2Nlc3NLZXlzOiBzdHJpbmcsXHJcbiAgICBrZWVwQWxpdmU6IHN0cmluZyxcclxufVxyXG5cclxudHlwZSBQcm9ncmFtRW52ID0ge1xyXG4gICAgUV9TRVJWRVJfSE9TVDogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfU0VSVkVSX1BPUlQ6IHN0cmluZyB8IHZvaWQsXHJcbiAgICBRX1NFUlZFUl9SUENfUE9SVDogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfUkVRVUVTVFNfTU9ERTogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfUkVRVUVTVFNfU0VSVkVSOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9SRVFVRVNUU19UT1BJQzogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfREFUQUJBU0VfU0VSVkVSOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9EQVRBQkFTRV9OQU1FOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9EQVRBQkFTRV9BVVRIOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9EQVRBQkFTRV9NQVhfU09DS0VUUzogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfU0xPV19EQVRBQkFTRV9TRVJWRVI6IHN0cmluZyB8IHZvaWQsXHJcbiAgICBRX1NMT1dfREFUQUJBU0VfTkFNRTogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfU0xPV19EQVRBQkFTRV9BVVRIOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9TTE9XX0RBVEFCQVNFX01BWF9TT0NLRVRTOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9BVVRIX0VORFBPSU5UOiBzdHJpbmcgfCB2b2lkLFxyXG4gICAgUV9NQU1fQUNDRVNTX0tFWVM6IHN0cmluZyB8IHZvaWQsXHJcbiAgICBRX0pBRUdFUl9FTkRQT0lOVDogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfVFJBQ0VfU0VSVklDRTogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfVFJBQ0VfVEFHUzogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfU1RBVFNEX1NFUlZFUjogc3RyaW5nIHwgdm9pZCxcclxuICAgIFFfU1RBVFNEX1RBR1M6IHN0cmluZyB8IHZvaWQsXHJcbiAgICBRX0tFRVBfQUxJVkU6IHN0cmluZyB8IHZvaWQsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVQcm90b2NvbChhZGRyZXNzOiBzdHJpbmcsIGRlZmF1bHRQcm90b2NvbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiAvXlxcdys6XFwvXFwvL2dpLnRlc3QoYWRkcmVzcykgPyBhZGRyZXNzIDogYCR7ZGVmYXVsdFByb3RvY29sfTovLyR7YWRkcmVzc31gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJcCgpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgaXB2NCA9IChPYmplY3QudmFsdWVzKG9zLm5ldHdvcmtJbnRlcmZhY2VzKCkpOiBhbnkpXHJcbiAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiBhY2MuY29uY2F0KHgpLCBbXSlcclxuICAgICAgICAuZmluZCh4ID0+IHguZmFtaWx5ID09PSAnSVB2NCcgJiYgIXguaW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGlwdjQgJiYgaXB2NC5hZGRyZXNzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVRhZ3Moczogc3RyaW5nKTogeyBbc3RyaW5nXTogc3RyaW5nIH0ge1xyXG4gICAgY29uc3QgdGFnczogeyBbc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcclxuICAgIHMuc3BsaXQoJywnKS5mb3JFYWNoKCh0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgaSA9IHQuaW5kZXhPZignPScpO1xyXG4gICAgICAgIGlmIChpID49IDApIHtcclxuICAgICAgICAgICAgdGFnc1t0LnN1YnN0cigwLCBpKV0gPSB0LnN1YnN0cihpICsgMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFnc1t0XSA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRhZ3M7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVmYXVsdE9wdGlvbnM6IFByb2dyYW1PcHRpb25zID0ge1xyXG4gICAgaG9zdDogZ2V0SXAoKSxcclxuICAgIHBvcnQ6ICc0MDAwJyxcclxuICAgIHJwY1BvcnQ6ICcnLFxyXG4gICAgcmVxdWVzdHNNb2RlOiAna2Fma2EnLFxyXG4gICAgcmVxdWVzdHNTZXJ2ZXI6ICdrYWZrYTo5MDkyJyxcclxuICAgIHJlcXVlc3RzVG9waWM6ICdyZXF1ZXN0cycsXHJcbiAgICBkYlNlcnZlcjogJ2FyYW5nb2RiOjg1MjknLFxyXG4gICAgZGJOYW1lOiAnYmxvY2tjaGFpbicsXHJcbiAgICBkYkF1dGg6ICcnLFxyXG4gICAgZGJNYXhTb2NrZXRzOiAnMTAwJyxcclxuICAgIHNsb3dEYlNlcnZlcjogJycsXHJcbiAgICBzbG93RGJOYW1lOiAnJyxcclxuICAgIHNsb3dEYkF1dGg6ICcnLFxyXG4gICAgc2xvd0RiTWF4U29ja2V0czogJzMnLFxyXG4gICAgYXV0aEVuZHBvaW50OiAnJyxcclxuICAgIG1hbUFjY2Vzc0tleXM6ICcnLFxyXG4gICAgamFlZ2VyRW5kcG9pbnQ6ICcnLFxyXG4gICAgdHJhY2VTZXJ2aWNlOiAnUSBTZXJ2ZXInLFxyXG4gICAgdHJhY2VUYWdzOiAnJyxcclxuICAgIHN0YXRzZFNlcnZlcjogJycsXHJcbiAgICBzdGF0c2RUYWdzOiAnJyxcclxuICAgIGtlZXBBbGl2ZTogJzYwMDAwJyxcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlT3B0aW9ucyhvcHRpb25zOiAkU2hhcGU8UHJvZ3JhbU9wdGlvbnM+LCBlbnY6IFByb2dyYW1FbnYsIGRlZmF1bHRzOiBQcm9ncmFtT3B0aW9ucyk6IFByb2dyYW1PcHRpb25zIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaG9zdDogb3B0aW9ucy5ob3N0IHx8IGVudi5RX1NFUlZFUl9IT1NUIHx8IGRlZmF1bHRzLmhvc3QsXHJcbiAgICAgICAgcG9ydDogb3B0aW9ucy5wb3J0IHx8IGVudi5RX1NFUlZFUl9QT1JUIHx8IGRlZmF1bHRzLnBvcnQsXHJcbiAgICAgICAgcnBjUG9ydDogb3B0aW9ucy5ycGNQb3J0IHx8IGVudi5RX1NFUlZFUl9SUENfUE9SVCB8fCBkZWZhdWx0cy5ycGNQb3J0LFxyXG4gICAgICAgIHJlcXVlc3RzTW9kZTogb3B0aW9ucy5yZXF1ZXN0c01vZGUgfHwgKGVudi5RX1JFUVVFU1RTX01PREU6IGFueSkgfHwgZGVmYXVsdHMucmVxdWVzdHNNb2RlLFxyXG4gICAgICAgIHJlcXVlc3RzU2VydmVyOiBvcHRpb25zLnJlcXVlc3RzU2VydmVyIHx8IGVudi5RX1JFUVVFU1RTX1NFUlZFUiB8fCBkZWZhdWx0cy5yZXF1ZXN0c1NlcnZlcixcclxuICAgICAgICByZXF1ZXN0c1RvcGljOiBvcHRpb25zLnJlcXVlc3RzVG9waWMgfHwgZW52LlFfUkVRVUVTVFNfVE9QSUMgfHwgZGVmYXVsdHMucmVxdWVzdHNUb3BpYyxcclxuICAgICAgICBkYlNlcnZlcjogb3B0aW9ucy5kYlNlcnZlciB8fCBlbnYuUV9EQVRBQkFTRV9TRVJWRVIgfHwgZGVmYXVsdHMuZGJTZXJ2ZXIsXHJcbiAgICAgICAgZGJOYW1lOiBvcHRpb25zLmRiTmFtZSB8fCBlbnYuUV9EQVRBQkFTRV9OQU1FIHx8IGRlZmF1bHRzLmRiTmFtZSxcclxuICAgICAgICBkYkF1dGg6IG9wdGlvbnMuZGJBdXRoIHx8IGVudi5RX0RBVEFCQVNFX0FVVEggfHwgZGVmYXVsdHMuZGJBdXRoLFxyXG4gICAgICAgIGRiTWF4U29ja2V0czogb3B0aW9ucy5kYk1heFNvY2tldHMgfHwgZW52LlFfREFUQUJBU0VfTUFYX1NPQ0tFVFMgfHwgZGVmYXVsdHMuZGJNYXhTb2NrZXRzLFxyXG4gICAgICAgIHNsb3dEYlNlcnZlcjogb3B0aW9ucy5zbG93RGJTZXJ2ZXIgfHwgZW52LlFfU0xPV19EQVRBQkFTRV9TRVJWRVIgfHwgZGVmYXVsdHMuc2xvd0RiU2VydmVyLFxyXG4gICAgICAgIHNsb3dEYk5hbWU6IG9wdGlvbnMuc2xvd0RiTmFtZSB8fCBlbnYuUV9TTE9XX0RBVEFCQVNFX05BTUUgfHwgZGVmYXVsdHMuc2xvd0RiTmFtZSxcclxuICAgICAgICBzbG93RGJBdXRoOiBvcHRpb25zLnNsb3dEYkF1dGggfHwgZW52LlFfU0xPV19EQVRBQkFTRV9BVVRIIHx8IGRlZmF1bHRzLnNsb3dEYkF1dGgsXHJcbiAgICAgICAgc2xvd0RiTWF4U29ja2V0czogb3B0aW9ucy5zbG93RGJNYXhTb2NrZXRzIHx8IGVudi5RX1NMT1dfREFUQUJBU0VfTUFYX1NPQ0tFVFMgfHwgZGVmYXVsdHMuc2xvd0RiTWF4U29ja2V0cyxcclxuICAgICAgICBhdXRoRW5kcG9pbnQ6IG9wdGlvbnMuYXV0aEVuZHBvaW50IHx8IGVudi5RX0FVVEhfRU5EUE9JTlQgfHwgZGVmYXVsdHMuYXV0aEVuZHBvaW50LFxyXG4gICAgICAgIG1hbUFjY2Vzc0tleXM6IG9wdGlvbnMubWFtQWNjZXNzS2V5cyB8fCBlbnYuUV9NQU1fQUNDRVNTX0tFWVMgfHwgZGVmYXVsdHMubWFtQWNjZXNzS2V5cyxcclxuICAgICAgICBqYWVnZXJFbmRwb2ludDogb3B0aW9ucy5qYWVnZXJFbmRwb2ludCB8fCBlbnYuUV9KQUVHRVJfRU5EUE9JTlQgfHwgZGVmYXVsdHMuamFlZ2VyRW5kcG9pbnQsXHJcbiAgICAgICAgdHJhY2VTZXJ2aWNlOiBvcHRpb25zLnRyYWNlU2VydmljZSB8fCBlbnYuUV9UUkFDRV9TRVJWSUNFIHx8IGRlZmF1bHRzLnRyYWNlU2VydmljZSxcclxuICAgICAgICB0cmFjZVRhZ3M6IG9wdGlvbnMudHJhY2VUYWdzIHx8IGVudi5RX1RSQUNFX1RBR1MgfHwgZGVmYXVsdHMudHJhY2VUYWdzLFxyXG4gICAgICAgIHN0YXRzZFNlcnZlcjogb3B0aW9ucy5zdGF0c2RTZXJ2ZXIgfHwgZW52LlFfU1RBVFNEX1NFUlZFUiB8fCBkZWZhdWx0cy5zdGF0c2RTZXJ2ZXIsXHJcbiAgICAgICAgc3RhdHNkVGFnczogb3B0aW9ucy5zdGF0c2RUYWdzIHx8IGVudi5RX1NUQVRTRF9UQUdTIHx8IGRlZmF1bHRzLnN0YXRzZFRhZ3MsXHJcbiAgICAgICAga2VlcEFsaXZlOiBvcHRpb25zLmtlZXBBbGl2ZSB8fCBlbnYuUV9LRUVQX0FMSVZFIHx8IGRlZmF1bHRzLmtlZXBBbGl2ZSxcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb25maWcob3B0aW9uczogJFNoYXBlPFByb2dyYW1PcHRpb25zPiwgZW52OiBQcm9ncmFtRW52LCBkZWZhdWx0czogUHJvZ3JhbU9wdGlvbnMpOiBRQ29uZmlnIHtcclxuICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IHJlc29sdmVPcHRpb25zKG9wdGlvbnMsIGVudiwgZGVmYXVsdHMpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBzZXJ2ZXI6IHtcclxuICAgICAgICAgICAgaG9zdDogcmVzb2x2ZWRPcHRpb25zLmhvc3QsXHJcbiAgICAgICAgICAgIHBvcnQ6IE51bWJlci5wYXJzZUludChyZXNvbHZlZE9wdGlvbnMucG9ydCksXHJcbiAgICAgICAgICAgIHJwY1BvcnQ6IHJlc29sdmVkT3B0aW9ucy5ycGNQb3J0LFxyXG4gICAgICAgICAgICBrZWVwQWxpdmU6IE51bWJlci5wYXJzZUludChyZXNvbHZlZE9wdGlvbnMua2VlcEFsaXZlKSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcXVlc3RzOiB7XHJcbiAgICAgICAgICAgIG1vZGU6IHJlc29sdmVkT3B0aW9ucy5yZXF1ZXN0c01vZGUsXHJcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWRPcHRpb25zLnJlcXVlc3RzU2VydmVyLFxyXG4gICAgICAgICAgICB0b3BpYzogcmVzb2x2ZWRPcHRpb25zLnJlcXVlc3RzVG9waWMsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhYmFzZToge1xyXG4gICAgICAgICAgICBzZXJ2ZXI6IHJlc29sdmVkT3B0aW9ucy5kYlNlcnZlcixcclxuICAgICAgICAgICAgbmFtZTogcmVzb2x2ZWRPcHRpb25zLmRiTmFtZSxcclxuICAgICAgICAgICAgYXV0aDogcmVzb2x2ZWRPcHRpb25zLmRiQXV0aCxcclxuICAgICAgICAgICAgbWF4U29ja2V0czogTnVtYmVyKHJlc29sdmVkT3B0aW9ucy5kYk1heFNvY2tldHMpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2xvd0RhdGFiYXNlOiB7XHJcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWRPcHRpb25zLnNsb3dEYlNlcnZlciB8fCByZXNvbHZlZE9wdGlvbnMuZGJTZXJ2ZXIsXHJcbiAgICAgICAgICAgIG5hbWU6IHJlc29sdmVkT3B0aW9ucy5zbG93RGJOYW1lIHx8IHJlc29sdmVkT3B0aW9ucy5kYk5hbWUsXHJcbiAgICAgICAgICAgIGF1dGg6IHJlc29sdmVkT3B0aW9ucy5zbG93RGJBdXRoIHx8IHJlc29sdmVkT3B0aW9ucy5kYkF1dGgsXHJcbiAgICAgICAgICAgIG1heFNvY2tldHM6IE51bWJlcihyZXNvbHZlZE9wdGlvbnMuc2xvd0RiTWF4U29ja2V0cyksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaXN0ZW5lcjoge1xyXG4gICAgICAgICAgICByZXN0YXJ0VGltZW91dDogMTAwMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHtcclxuICAgICAgICAgICAgZW5kcG9pbnQ6IHJlc29sdmVkT3B0aW9ucy5hdXRoRW5kcG9pbnQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBqYWVnZXI6IHtcclxuICAgICAgICAgICAgZW5kcG9pbnQ6IHJlc29sdmVkT3B0aW9ucy5qYWVnZXJFbmRwb2ludCxcclxuICAgICAgICAgICAgc2VydmljZTogcmVzb2x2ZWRPcHRpb25zLnRyYWNlU2VydmljZSxcclxuICAgICAgICAgICAgdGFnczogcGFyc2VUYWdzKHJlc29sdmVkT3B0aW9ucy50cmFjZVRhZ3MpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3RhdHNkOiB7XHJcbiAgICAgICAgICAgIHNlcnZlcjogcmVzb2x2ZWRPcHRpb25zLnN0YXRzZFNlcnZlcixcclxuICAgICAgICAgICAgdGFnczogKHJlc29sdmVkT3B0aW9ucy5zdGF0c2RUYWdzIHx8ICcnKS5zcGxpdCgnLCcpLm1hcCh4ID0+IHgudHJpbSgpKS5maWx0ZXIoeCA9PiB4KSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1hbUFjY2Vzc0tleXM6IG5ldyBTZXQoKHJlc29sdmVkT3B0aW9ucy5tYW1BY2Nlc3NLZXlzIHx8ICcnKS5zcGxpdCgnLCcpKSxcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEluZGV4SW5mbyA9IHtcclxuICAgIGZpZWxkczogc3RyaW5nW10sXHJcbiAgICB0eXBlPzogc3RyaW5nLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDb2xsZWN0aW9uSW5mbyA9IHtcclxuICAgIG5hbWU/OiBzdHJpbmcsXHJcbiAgICBpbmRleGVzOiBJbmRleEluZm9bXSxcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIERiSW5mbyA9IHtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGNvbGxlY3Rpb25zOiB7XHJcbiAgICAgICAgW3N0cmluZ106IENvbGxlY3Rpb25JbmZvLFxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzb3J0ZWRJbmRleChmaWVsZHM6IHN0cmluZ1tdKTogSW5kZXhJbmZvIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogJ3BlcnNpc3RlbnQnLFxyXG4gICAgICAgIGZpZWxkcyxcclxuICAgIH07XHJcbn1cclxuXHJcbmNvbnN0IEJMT0NLQ0hBSU46IHtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGNvbGxlY3Rpb25zOiB7XHJcbiAgICAgICAgW3N0cmluZ106IENvbGxlY3Rpb25JbmZvLFxyXG4gICAgfVxyXG59ID0ge1xyXG4gICAgbmFtZTogJ2Jsb2NrY2hhaW4nLFxyXG4gICAgY29sbGVjdGlvbnM6IHtcclxuICAgICAgICBibG9ja3M6IHtcclxuICAgICAgICAgICAgaW5kZXhlczogW1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzZXFfbm8nLCAnZ2VuX3V0aW1lJ10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydnZW5fdXRpbWUnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdzaGFyZCcsICdzZXFfbm8nXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdzaGFyZCcsICdnZW5fdXRpbWUnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdzZXFfbm8nXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3dvcmtjaGFpbl9pZCcsICdnZW5fdXRpbWUnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ21hc3Rlci5taW5fc2hhcmRfZ2VuX3V0aW1lJ10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydwcmV2X3JlZi5yb290X2hhc2gnLCAnX2tleSddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsncHJldl9hbHRfcmVmLnJvb3RfaGFzaCcsICdfa2V5J10pLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWNjb3VudHM6IHtcclxuICAgICAgICAgICAgaW5kZXhlczogW1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydsYXN0X3RyYW5zX2x0J10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydiYWxhbmNlJ10pLFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVzc2FnZXM6IHtcclxuICAgICAgICAgICAgaW5kZXhlczogW1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydibG9ja19pZCddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsndmFsdWUnLCAnY3JlYXRlZF9hdCddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnc3JjJywgJ3ZhbHVlJywgJ2NyZWF0ZWRfYXQnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2RzdCcsICd2YWx1ZScsICdjcmVhdGVkX2F0J10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzcmMnLCAnY3JlYXRlZF9hdCddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnZHN0JywgJ2NyZWF0ZWRfYXQnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2NyZWF0ZWRfbHQnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2NyZWF0ZWRfYXQnXSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmFuc2FjdGlvbnM6IHtcclxuICAgICAgICAgICAgaW5kZXhlczogW1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydibG9ja19pZCddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnaW5fbXNnJ10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydvdXRfbXNnc1sqXSddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYWNjb3VudF9hZGRyJywgJ25vdyddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbm93J10pLFxyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXgoWydsdCddKSxcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYWNjb3VudF9hZGRyJywgJ29yaWdfc3RhdHVzJywgJ2VuZF9zdGF0dXMnXSksXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ25vdycsICdhY2NvdW50X2FkZHInLCAnbHQnXSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBibG9ja3Nfc2lnbmF0dXJlczoge1xyXG4gICAgICAgICAgICBpbmRleGVzOiBbXHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3NpZ25hdHVyZXNbKl0ubm9kZV9pZCcsICdnZW5fdXRpbWUnXSksXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgQkxPQ0tDSEFJTl9EQjogRGJJbmZvID0ge1xyXG4gICAgLi4uQkxPQ0tDSEFJTixcclxuICAgIGxhc3RVcGRhdGVUaW1lOiAwLFxyXG59O1xyXG5cclxuT2JqZWN0LmVudHJpZXMoQkxPQ0tDSEFJTi5jb2xsZWN0aW9ucykuZm9yRWFjaCgoW25hbWUsIGNvbGxlY3Rpb25NaXhlZF0pID0+IHtcclxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSAoKGNvbGxlY3Rpb25NaXhlZDogYW55KTogQ29sbGVjdGlvbkluZm8pO1xyXG4gICAgY29sbGVjdGlvbi5uYW1lID0gbmFtZTtcclxuICAgIGNvbGxlY3Rpb24uaW5kZXhlcy5wdXNoKHsgZmllbGRzOiBbJ19rZXknXSB9KTtcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgU1RBVFMgPSB7XHJcbiAgICBzdGFydDogJ3N0YXJ0JyxcclxuICAgIHByZWZpeDogJ3FzZXJ2ZXIuJyxcclxuICAgIGRvYzoge1xyXG4gICAgICAgIGNvdW50OiAnZG9jLmNvdW50JyxcclxuICAgIH0sXHJcbiAgICBwb3N0OiB7XHJcbiAgICAgICAgY291bnQ6ICdwb3N0LmNvdW50JyxcclxuICAgICAgICBmYWlsZWQ6ICdwb3N0LmZhaWxlZCcsXHJcbiAgICB9LFxyXG4gICAgcXVlcnk6IHtcclxuICAgICAgICBjb3VudDogJ3F1ZXJ5LmNvdW50JyxcclxuICAgICAgICB0aW1lOiAncXVlcnkudGltZScsXHJcbiAgICAgICAgYWN0aXZlOiAncXVlcnkuYWN0aXZlJyxcclxuICAgICAgICBmYWlsZWQ6ICdxdWVyeS5mYWlsZWQnLFxyXG4gICAgICAgIHNsb3c6ICdxdWVyeS5zbG93JyxcclxuICAgIH0sXHJcbiAgICBzdWJzY3JpcHRpb246IHtcclxuICAgICAgICBhY3RpdmU6ICdzdWJzY3JpcHRpb24uYWN0aXZlJyxcclxuICAgIH0sXHJcbiAgICB3YWl0Rm9yOiB7XHJcbiAgICAgICAgYWN0aXZlOiAnd2FpdGZvci5hY3RpdmUnLFxyXG4gICAgfSxcclxufTtcclxuXHJcbiJdfQ==