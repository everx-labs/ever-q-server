"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.INDEXES = void 0;

var _data = _interopRequireDefault(require("./data"));

var _collection = require("./collection");

var _resolversGenerated = require("../graphql/resolvers-generated");

var _dataProvider = require("./data-provider");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*
 * Copyright 2018-2020 TON DEV SOLUTIONS LTD.
 *
 * Licensed under the SOFTWARE EVALUATION License (the "License"); you may not use
 * this file except in compliance with the License.  You may obtain a copy of the
 * License at:
 *
 * http://www.ton.dev/licenses
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific TON DEV software governing permissions and
 * limitations under the License.
 */
const INDEXES = {
  blocks: {
    indexes: [(0, _dataProvider.sortedIndex)(['seq_no', 'gen_utime']), (0, _dataProvider.sortedIndex)(['gen_utime']), (0, _dataProvider.sortedIndex)(['workchain_id', 'shard', 'seq_no']), (0, _dataProvider.sortedIndex)(['workchain_id', 'shard', 'gen_utime']), (0, _dataProvider.sortedIndex)(['workchain_id', 'seq_no']), (0, _dataProvider.sortedIndex)(['workchain_id', 'gen_utime']), (0, _dataProvider.sortedIndex)(['master.min_shard_gen_utime']), (0, _dataProvider.sortedIndex)(['prev_ref.root_hash', '_key']), (0, _dataProvider.sortedIndex)(['prev_alt_ref.root_hash', '_key'])]
  },
  accounts: {
    indexes: [(0, _dataProvider.sortedIndex)(['last_trans_lt']), (0, _dataProvider.sortedIndex)(['balance'])]
  },
  messages: {
    indexes: [(0, _dataProvider.sortedIndex)(['block_id']), (0, _dataProvider.sortedIndex)(['value', 'created_at']), (0, _dataProvider.sortedIndex)(['src', 'value', 'created_at']), (0, _dataProvider.sortedIndex)(['dst', 'value', 'created_at']), (0, _dataProvider.sortedIndex)(['src', 'created_at']), (0, _dataProvider.sortedIndex)(['dst', 'created_at']), (0, _dataProvider.sortedIndex)(['created_lt']), (0, _dataProvider.sortedIndex)(['created_at'])]
  },
  transactions: {
    indexes: [(0, _dataProvider.sortedIndex)(['block_id']), (0, _dataProvider.sortedIndex)(['in_msg']), (0, _dataProvider.sortedIndex)(['out_msgs[*]']), (0, _dataProvider.sortedIndex)(['account_addr', 'now']), (0, _dataProvider.sortedIndex)(['now']), (0, _dataProvider.sortedIndex)(['lt']), (0, _dataProvider.sortedIndex)(['account_addr', 'orig_status', 'end_status']), (0, _dataProvider.sortedIndex)(['now', 'account_addr', 'lt'])]
  },
  blocks_signatures: {
    indexes: [(0, _dataProvider.sortedIndex)(['signatures[*].node_id', 'gen_utime'])]
  },
  zerostates: {
    indexes: []
  }
};
exports.INDEXES = INDEXES;
Object.values(INDEXES).forEach(collection => {
  collection.indexes = collection.indexes.concat({
    fields: ['_key']
  });
});

class QBlockchainData extends _data.default {
  constructor(options) {
    super(options);

    const add = (name, type, mutable) => {
      return this.addCollection(name, type, mutable, INDEXES[name].indexes);
    };

    this.accounts = add('accounts', _resolversGenerated.Account, true);
    this.transactions = add('transactions', _resolversGenerated.Transaction, false);
    this.messages = add('messages', _resolversGenerated.Message, false);
    this.blocks = add('blocks', _resolversGenerated.Block, false);
    this.blocks_signatures = add('blocks_signatures', _resolversGenerated.BlockSignatures, false);
    this.zerostates = add('zerostates', _resolversGenerated.Zerostate, false);
  }

}

exports.default = QBlockchainData;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zZXJ2ZXIvZGF0YS9ibG9ja2NoYWluLmpzIl0sIm5hbWVzIjpbIklOREVYRVMiLCJibG9ja3MiLCJpbmRleGVzIiwiYWNjb3VudHMiLCJtZXNzYWdlcyIsInRyYW5zYWN0aW9ucyIsImJsb2Nrc19zaWduYXR1cmVzIiwiemVyb3N0YXRlcyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJjb2xsZWN0aW9uIiwiY29uY2F0IiwiZmllbGRzIiwiUUJsb2NrY2hhaW5EYXRhIiwiUURhdGEiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJhZGQiLCJuYW1lIiwidHlwZSIsIm11dGFibGUiLCJhZGRDb2xsZWN0aW9uIiwiQWNjb3VudCIsIlRyYW5zYWN0aW9uIiwiTWVzc2FnZSIsIkJsb2NrIiwiQmxvY2tTaWduYXR1cmVzIiwiWmVyb3N0YXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBbUJBOztBQUNBOztBQUNBOztBQVFBOzs7O0FBN0JBOzs7Ozs7Ozs7Ozs7Ozs7QUErQk8sTUFBTUEsT0FBTyxHQUFHO0FBQ25CQyxFQUFBQSxNQUFNLEVBQUU7QUFDSkMsSUFBQUEsT0FBTyxFQUFFLENBQ0wsK0JBQVksQ0FBQyxRQUFELEVBQVcsV0FBWCxDQUFaLENBREssRUFFTCwrQkFBWSxDQUFDLFdBQUQsQ0FBWixDQUZLLEVBR0wsK0JBQVksQ0FBQyxjQUFELEVBQWlCLE9BQWpCLEVBQTBCLFFBQTFCLENBQVosQ0FISyxFQUlMLCtCQUFZLENBQUMsY0FBRCxFQUFpQixPQUFqQixFQUEwQixXQUExQixDQUFaLENBSkssRUFLTCwrQkFBWSxDQUFDLGNBQUQsRUFBaUIsUUFBakIsQ0FBWixDQUxLLEVBTUwsK0JBQVksQ0FBQyxjQUFELEVBQWlCLFdBQWpCLENBQVosQ0FOSyxFQU9MLCtCQUFZLENBQUMsNEJBQUQsQ0FBWixDQVBLLEVBUUwsK0JBQVksQ0FBQyxvQkFBRCxFQUF1QixNQUF2QixDQUFaLENBUkssRUFTTCwrQkFBWSxDQUFDLHdCQUFE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QUFDQSxTQUFLcEIsaUJBQUwsR0FBeUJZLEdBQUcsQ0FBQyxtQkFBRCxFQUFzQlMsbUNBQXRCLEVBQXVDLEtBQXZDLENBQTVCO0FBQ0EsU0FBS3BCLFVBQUwsR0FBa0JXLEdBQUcsQ0FBQyxZQUFELEVBQWVVLDZCQUFmLEVBQTBCLEtBQTFCLENBQXJCO0FBQ0g7O0FBbkI4QyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgMjAxOC0yMDIwIFRPTiBERVYgU09MVVRJT05TIExURC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgU09GVFdBUkUgRVZBTFVBVElPTiBMaWNlbnNlICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcbiAqIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxuICogTGljZW5zZSBhdDpcbiAqXG4gKiBodHRwOi8vd3d3LnRvbi5kZXYvbGljZW5zZXNcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIFRPTiBERVYgc29mdHdhcmUgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUgeyBRRGF0YU9wdGlvbnMgfSBmcm9tICcuL2RhdGEnO1xuaW1wb3J0IFFEYXRhIGZyb20gJy4vZGF0YSc7XG5pbXBvcnQgeyBRRGF0YUNvbGxlY3Rpb24gfSBmcm9tICcuL2NvbGxlY3Rpb24nO1xuaW1wb3J0IHtcbiAgICBBY2NvdW50LFxuICAgIEJsb2NrLFxuICAgIEJsb2NrU2lnbmF0dXJlcyxcbiAgICBNZXNzYWdlLFxuICAgIFRyYW5zYWN0aW9uLFxuICAgIFplcm9zdGF0ZSxcbn0gZnJvbSAnLi4vZ3JhcGhxbC9yZXNvbHZlcnMtZ2VuZXJhdGVkJztcbmltcG9ydCB7IHNvcnRlZEluZGV4IH0gZnJvbSAnLi9kYXRhLXByb3ZpZGVyJztcblxuZXhwb3J0IGNvbnN0IElOREVYRVMgPSB7XG4gICAgYmxvY2tzOiB7XG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnc2VxX25vJywgJ2dlbl91dGltZSddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnc2hhcmQnLCAnc2VxX25vJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnc2hhcmQnLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnc2VxX25vJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWyd3b3JrY2hhaW5faWQnLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydtYXN0ZXIubWluX3NoYXJkX2dlbl91dGltZSddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsncHJldl9yZWYucm9vdF9oYXNoJywgJ19rZXknXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3ByZXZfYWx0X3JlZi5yb290X2hhc2gnLCAnX2tleSddKSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGFjY291bnRzOiB7XG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbGFzdF90cmFuc19sdCddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmFsYW5jZSddKSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIG1lc3NhZ2VzOiB7XG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmxvY2tfaWQnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3ZhbHVlJywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ3NyYycsICd2YWx1ZScsICdjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydkc3QnLCAndmFsdWUnLCAnY3JlYXRlZF9hdCddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnc3JjJywgJ2NyZWF0ZWRfYXQnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2RzdCcsICdjcmVhdGVkX2F0J10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydjcmVhdGVkX2x0J10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydjcmVhdGVkX2F0J10pLFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgdHJhbnNhY3Rpb25zOiB7XG4gICAgICAgIGluZGV4ZXM6IFtcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnYmxvY2tfaWQnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2luX21zZyddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnb3V0X21zZ3NbKl0nXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2FjY291bnRfYWRkcicsICdub3cnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ25vdyddKSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4KFsnbHQnXSksXG4gICAgICAgICAgICBzb3J0ZWRJbmRleChbJ2FjY291bnRfYWRkcicsICdvcmlnX3N0YXR1cycsICdlbmRfc3RhdHVzJ10pLFxuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydub3cnLCAnYWNjb3VudF9hZGRyJywgJ2x0J10pLFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgYmxvY2tzX3NpZ25hdHVyZXM6IHtcbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgICAgc29ydGVkSW5kZXgoWydzaWduYXR1cmVzWypdLm5vZGVfaWQnLCAnZ2VuX3V0aW1lJ10pLFxuICAgICAgICBdLFxuICAgIH0sXG4gICAgemVyb3N0YXRlczoge1xuICAgICAgICBpbmRleGVzOiBbXSxcbiAgICB9LFxufTtcblxuXG5PYmplY3QudmFsdWVzKElOREVYRVMpLmZvckVhY2goKGNvbGxlY3Rpb246IGFueSkgPT4ge1xuICAgIGNvbGxlY3Rpb24uaW5kZXhlcyA9IGNvbGxlY3Rpb24uaW5kZXhlcy5jb25jYXQoeyBmaWVsZHM6IFsnX2tleSddIH0pO1xufSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUUJsb2NrY2hhaW5EYXRhIGV4dGVuZHMgUURhdGEge1xuICAgIHRyYW5zYWN0aW9uczogUURhdGFDb2xsZWN0aW9uO1xuICAgIG1lc3NhZ2VzOiBRRGF0YUNvbGxlY3Rpb247XG4gICAgYWNjb3VudHM6IFFEYXRhQ29sbGVjdGlvbjtcbiAgICBibG9ja3M6IFFEYXRhQ29sbGVjdGlvbjtcbiAgICBibG9ja3Nfc2lnbmF0dXJlczogUURhdGFDb2xsZWN0aW9uO1xuICAgIHplcm9zdGF0ZXM6IFFEYXRhQ29sbGVjdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFFEYXRhT3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgY29uc3QgYWRkID0gKG5hbWUsIHR5cGUsIG11dGFibGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZENvbGxlY3Rpb24obmFtZSwgdHlwZSwgbXV0YWJsZSwgSU5ERVhFU1tuYW1lXS5pbmRleGVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hY2NvdW50cyA9IGFkZCgnYWNjb3VudHMnLCBBY2NvdW50LCB0cnVlKTtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbnMgPSBhZGQoJ3RyYW5zYWN0aW9ucycsIFRyYW5zYWN0aW9uLCBmYWxzZSk7XG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSBhZGQoJ21lc3NhZ2VzJywgTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IGFkZCgnYmxvY2tzJywgQmxvY2ssIGZhbHNlKTtcbiAgICAgICAgdGhpcy5ibG9ja3Nfc2lnbmF0dXJlcyA9IGFkZCgnYmxvY2tzX3NpZ25hdHVyZXMnLCBCbG9ja1NpZ25hdHVyZXMsIGZhbHNlKTtcbiAgICAgICAgdGhpcy56ZXJvc3RhdGVzID0gYWRkKCd6ZXJvc3RhdGVzJywgWmVyb3N0YXRlLCBmYWxzZSk7XG4gICAgfVxufVxuIl19